<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>leanux: tools/lard/lar_snap.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../leanux.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">leanux
   &#160;<span id="projectnumber">v1.0.9-1-gdf65296</span>
   </div>
   <div id="projectbrief">leanux - GNU/Linux performance tools and C++ API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d4/dc8/lar__snap_8cpp_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">lar_snap.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d4/dc8/lar__snap_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//========================================================================</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// This file is part of the leanux toolkit.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// Copyright (C) 2015-2016 Jan-Marten Spit http://www.o-rho.com/leanux</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// Permission is hereby granted, free of charge, to any person obtaining a</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// copy of this software and associated documentation files (the</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// &quot;Software&quot;), to deal in the Software without restriction, including</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// without limitation the rights to use, copy, modify, merge, publish,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// distribute, distribute with modifications, sublicense, and/or sell</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// copies of the Software, and to permit persons to whom the Software is</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// furnished to do so, subject to the following conditions:</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// The above copyright notice and this permission notice shall be included</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// in all copies or substantial portions of the Software.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// IN NO EVENT SHALL THE ABOVE COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// Except as contained in this notice, the name(s) of the above copyright</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// holders shall not be used in advertising or otherwise to promote the</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// sale, use or other dealings in this Software without prior written</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// authorization.</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">//========================================================================</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d59/lar__snap_8hpp.html">lar_snap.hpp</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d57/configfile_8hpp.html">configfile.hpp</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d90/system_8hpp.html">system.hpp</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;syslog.h&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d2/dd1/namespaceleanux.html">leanux</a> {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keyword">namespace </span>tools {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">namespace </span>lard {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a70c410eb53597a11002d0d27c6ca0a67">   54</a></span>&#160;      <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a70c410eb53597a11002d0d27c6ca0a67">task_comm_len</a> = 16;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a0a3951f50023eb0f3b4f6722a5943436">   56</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a0a3951f50023eb0f3b4f6722a5943436">sysLog</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> level, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> limit, <span class="keyword">const</span> std::string &amp;msg ) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordflow">if</span> ( level &lt;= limit ) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;          <span class="keywordtype">short</span> severity = LOG_USER;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;          std::stringstream ss;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;          <span class="keywordflow">switch</span> ( level ) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            <span class="keywordflow">case</span> 0 :</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;[ERR]&quot;</span>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;              severity = <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#ad9422852e8ee51e45a1e339314b6a4be">LOG_ERR</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <span class="keywordflow">case</span> 1 :</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;[WARN]&quot;</span>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;              severity = LOG_WARNING;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <span class="keywordflow">case</span> 2 :</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;[STAT]&quot;</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;              severity = LOG_NOTICE;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="keywordflow">case</span> 3 :</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;[INFO]&quot;</span>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;              severity = <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a8757718fb867b3a70a6f878bbe586342">LOG_INFO</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            <span class="keywordflow">case</span> 4 :</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;[DEBUG]&quot;</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;              severity = <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a0caca769051aa8ad8590ca7e048ac947">LOG_DEBUG</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            default :</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;              ss &lt;&lt; <span class="stringliteral">&quot;[?]&quot;</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;          }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;          ss &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; msg;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;          openlog( <span class="stringliteral">&quot;lard&quot;</span>, LOG_PID, LOG_DAEMON );</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;          syslog( LOG_MAKEPRI(LOG_DAEMON, severity), <span class="stringliteral">&quot;%s&quot;</span>, ss.str().c_str() );</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;          closelog();</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="../../d3/d88/classleanux_1_1tools_1_1lard_1_1TimeSnap.html#ae4186449701030aec1986be6c197ba24">   92</a></span>&#160;      <span class="keywordtype">long</span> <a class="code" href="../../d3/d88/classleanux_1_1tools_1_1lard_1_1TimeSnap.html#ae4186449701030aec1986be6c197ba24">TimeSnap::storeSnap</a>( <span class="keyword">const</span> <a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html">persist::Database</a> &amp;db, <span class="keywordtype">long</span> <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a>, <span class="keywordtype">double</span> seconds ) {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml( db );</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO snapshot (istart,istop) VALUES (:istart,:istop)&quot;</span> );</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, <a class="code" href="../../d3/d88/classleanux_1_1tools_1_1lard_1_1TimeSnap.html#a94d6856ce0cb151cbdd9770f5d256ff3">istart_</a> );</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, <a class="code" href="../../d3/d88/classleanux_1_1tools_1_1lard_1_1TimeSnap.html#acfd64657c3050b650e24c102406c5810">istop_</a> );</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">return</span> db.<a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html#ad2d6eb77b4fe786579b5447fd1b692bf">lastInsertRowid</a>();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#aaa09ea465f8fc251716e47382551cf13">  101</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#aaa09ea465f8fc251716e47382551cf13">IOSnap::startSnap</a>() {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="../../d5/d01/namespaceleanux_1_1block.html#ae227ed1fa83d91988072e335ea0f81e9">block::getStats</a>( <a class="code" href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#ae6647d279dcbab31b29db1e69549806c">stat1_</a> );</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#ab020781eb6e152bf9b884a4000d7e923">  105</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#ab020781eb6e152bf9b884a4000d7e923">IOSnap::stopSnap</a>() {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <a class="code" href="../../d5/d01/namespaceleanux_1_1block.html#ae227ed1fa83d91988072e335ea0f81e9">block::getStats</a>( <a class="code" href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#a5e4b8c858676105c2c505038f110a377">stat2_</a> );</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#acd9defb7ca62e96d5f76b04b3e365b41">  109</a></span>&#160;      <span class="keywordtype">long</span> <a class="code" href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#acd9defb7ca62e96d5f76b04b3e365b41">IOSnap::storeSnap</a>( <span class="keyword">const</span> <a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html">persist::Database</a> &amp;db, <span class="keywordtype">long</span> <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a>, <span class="keywordtype">double</span> seconds ) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordtype">int</span> stored_disks = 0;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="../../d5/d01/namespaceleanux_1_1block.html#aa840e578e98199d5f3f2cdd80e356778">block::DeviceStatsMap</a> delta;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <a class="code" href="../../d5/d01/namespaceleanux_1_1block.html#a4e93a020cb6003bed11dd67f7e02434f">block::MajorMinorVector</a> vec;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <a class="code" href="../../d5/d01/namespaceleanux_1_1block.html#aa7dafdc339a1159d4364e877a7453c03">block::deltaDeviceStats</a>( <a class="code" href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#ae6647d279dcbab31b29db1e69549806c">stat1_</a>, <a class="code" href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#a5e4b8c858676105c2c505038f110a377">stat2_</a>, delta, vec );</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <a class="code" href="../../d4/d1c/classleanux_1_1block_1_1StatsSorter.html">block::StatsSorter</a> sorter( &amp;delta );</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        sort( vec.begin(), vec.end(), sorter );</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">for</span> ( block::MajorMinorVector::const_iterator d = vec.begin(); d != vec.end(); d++ ) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;          <span class="comment">//if ( (*d).isWholeDisk() &amp;&amp; (delta[*d].reads + delta[*d].writes + delta[*d].iorequest_cnt) &gt; 0 ) {</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;          <span class="keywordflow">if</span> ( (*d).isWholeDisk() ) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            std::string sdiskid = (*d).getDiskId();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            std::string ssyspath = (*d).getSysPath();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keywordtype">size_t</span> p = ssyspath.rfind(<span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            ssyspath  = ssyspath.substr(0,p);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keywordtype">long</span> diskid = 0;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html">persist::Query</a> qry(db);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            qry.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;SELECT id FROM disk WHERE syspath=:syspath and wwn=:wwn and not (syspath=&#39;&#39; and wwn=&#39;&#39;)&quot;</span> );</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            qry.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, ssyspath );</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            qry.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, sdiskid );</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="keywordflow">if</span> ( qry.<a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#a294e11c33a22761503c49418f5ca9815">step</a>() ) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;              diskid = qry.<a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#ada37977ad924b728401fa1fb7506cd2e">getLong</a>(0);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;              <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;              dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;UPDATE disk set device=:device WHERE id=:id&quot;</span> );</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, diskid );</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;              <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;              dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO disk (device,syspath,wwn,model) VALUES (:device,:syspath,:wwn,:model)&quot;</span> );</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, (*d).getName() );</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, ssyspath );</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, sdiskid );</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 4, (*d).getModel() );</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;              diskid = db.<a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html#ad2d6eb77b4fe786579b5447fd1b692bf">lastInsertRowid</a>();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO iostat (snapshot,disk,util,svctm,rs,ws,rbs,wbs,artm,awtm,qsz,iodones,ioreqs,ioerrs) VALUES ( \</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="stringliteral">              :snapid, \</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="stringliteral">              :disk, \</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="stringliteral">              :util, \</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="stringliteral">              :svctm, \</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="stringliteral">              :rs, \</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="stringliteral">              :ws, \</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="stringliteral">              :rbs, \</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="stringliteral">              :wbs, \</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="stringliteral">              :artm, \</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="stringliteral">              :awtm, \</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="stringliteral">              :qsz, \</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="stringliteral">              :iodones, \</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="stringliteral">              :ioreqs, \</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="stringliteral">              :ioerrs \</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="stringliteral">              )&quot;</span> );</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a> );</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, diskid );</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, delta[(*d)].io_ms/1000.0/seconds  );</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">if</span> ( delta[*d].reads + delta[*d].writes &gt; 0 ) dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 4, delta[*d].io_ms/1000.0/(delta[*d].reads + delta[*d].writes)  ); <span class="keywordflow">else</span> dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>(4, 0 );</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 5, delta[*d].reads/seconds );</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 6, delta[*d].writes/seconds );</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 7, delta[*d].read_sectors*(*d).getSectorSize()/seconds );</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 8, delta[*d].write_sectors*(*d).getSectorSize()/seconds );</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="keywordflow">if</span> ( delta[*d].reads &gt; 0 ) dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 9, delta[*d].read_ms/1000.0/delta[*d].reads ); <span class="keywordflow">else</span> dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 9, 0 );</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">if</span> ( delta[*d].writes &gt; 0 ) dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 10, delta[*d].write_ms/1000.0/delta[*d].writes ); <span class="keywordflow">else</span> dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 10, 0 );</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 11, (<span class="keywordtype">double</span>)delta[*d].io_in_progress );</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 12, (<span class="keywordtype">double</span>)delta[*d].iodone_cnt/seconds );</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 13, (<span class="keywordtype">double</span>)delta[*d].iorequest_cnt/seconds );</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 14, (<span class="keywordtype">double</span>)delta[*d].ioerr_cnt/seconds );</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            stored_disks++;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;          }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;          <span class="keywordflow">if</span> ( stored_disks &gt;= <a class="code" href="../../de/d84/classleanux_1_1util_1_1ConfigFile.html#a8cef175948cd9727c732de3a605c99ba">util::ConfigFile::getConfig</a>()-&gt;getIntValue(<span class="stringliteral">&quot;MAX_DISKS&quot;</span>) ) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#a18e1fbcdf89ec7537bc853b314657890">  185</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#a18e1fbcdf89ec7537bc853b314657890">CPUSnap::startSnap</a>() {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#a59cf2af9830e859ca848f87c9d605d6f">cpu::getCPUStats</a>( <a class="code" href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#ac6e10ceac5913085f93d730f5082fd9d">stat1_</a> );</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#af9c73b36a541b0eae3b06e491b9cdff0">  189</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#af9c73b36a541b0eae3b06e491b9cdff0">CPUSnap::stopSnap</a>() {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#a59cf2af9830e859ca848f87c9d605d6f">cpu::getCPUStats</a>( <a class="code" href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#aa9b17773c81ccc4dc5767cf5bf25b715">stat2_</a> );</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#a08144ea8cd0e5e5ff868278abc111f44">  193</a></span>&#160;      <span class="keywordtype">long</span> <a class="code" href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#a08144ea8cd0e5e5ff868278abc111f44">CPUSnap::storeSnap</a>( <span class="keyword">const</span> <a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html">persist::Database</a> &amp;db, <span class="keywordtype">long</span> <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a>, <span class="keywordtype">double</span> seconds ) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">for</span> ( cpu::CPUStatsMap::const_iterator s2 = <a class="code" href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#aa9b17773c81ccc4dc5767cf5bf25b715">stat2_</a>.begin(); s2 != <a class="code" href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#aa9b17773c81ccc4dc5767cf5bf25b715">stat2_</a>.end(); ++s2 ) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;          cpu::CPUStatsMap::const_iterator s1 = <a class="code" href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#ac6e10ceac5913085f93d730f5082fd9d">stat1_</a>.find(s2-&gt;first);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;          <span class="keywordflow">if</span> ( s1 != <a class="code" href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#ac6e10ceac5913085f93d730f5082fd9d">stat1_</a>.end() ) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO cpustat (snapshot,phyid,coreid,logical,user_mode,system_mode,iowait_mode,nice_mode,irq_mode,softirq_mode,steal_mode) VALUES ( \</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="stringliteral">              :snapid, \</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="stringliteral">              :phyid, \</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="stringliteral">              :coreid, \</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="stringliteral">              :logical, \</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="stringliteral">              :user_mode, \</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="stringliteral">              :system_mode, \</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="stringliteral">              :iowait_mode, \</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="stringliteral">              :nice_mode, \</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="stringliteral">              :irq_mode, \</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="stringliteral">              :softirq_mode, \</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="stringliteral">              :steal_mode )&quot;</span> );</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a> );</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, (<span class="keywordtype">int</span>)<a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#aa3faebda296d39bfcaaccfe9a8398ec0">cpu::getCPUPhysicalId</a>( (<span class="keywordtype">long</span>)s2-&gt;first ) );</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, (<span class="keywordtype">int</span>)<a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#a35d1bf5dbb139fcebedd891244d36039">cpu::getCPUCoreId</a>( (<span class="keywordtype">long</span>)s2-&gt;first ) );</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 4, (<span class="keywordtype">long</span>)s2-&gt;first );</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 5, (s2-&gt;second.user - s1-&gt;second.user)/seconds );</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 6, (s2-&gt;second.system - s1-&gt;second.system)/seconds );</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 7, (s2-&gt;second.iowait - s1-&gt;second.iowait)/seconds );</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 8, (s2-&gt;second.nice - s1-&gt;second.nice)/seconds );</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 9, (s2-&gt;second.irq - s1-&gt;second.irq)/seconds );</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 10, (s2-&gt;second.softirq - s1-&gt;second.softirq)/seconds );</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 11, (s2-&gt;second.steal - s1-&gt;second.steal)/seconds );</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;          }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#ad519ce292b396ea7b34eb8f98c3d76bd">  228</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#ad519ce292b396ea7b34eb8f98c3d76bd">SchedSnap::startSnap</a>() {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#ae2ac34d0684cf4ae4d8a99cda449c7b7">sched1_</a> = <a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#ac5901cd50a8f7e4263b2ecb9875a818d">cpu::getSchedInfo</a>();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#a9f50740a011befb245de0dbfbbf6e4ca">cpu::getLoadAvg</a>( <a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a1f5c38954ad5215a42babcb2086c146c">load1_</a> );</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#aa6adf554028f38d4652a368f029a605d">  233</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#aa6adf554028f38d4652a368f029a605d">SchedSnap::stopSnap</a>() {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a749d191a03638897ca203e6349bb98c1">sched2_</a> = <a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#ac5901cd50a8f7e4263b2ecb9875a818d">cpu::getSchedInfo</a>();</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#a9f50740a011befb245de0dbfbbf6e4ca">cpu::getLoadAvg</a>( <a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a75af41bba63ce8431a38fa73929c46da">load2_</a> );</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a2726e1f32a987d973afd8d5dcc1b96b1">  238</a></span>&#160;      <span class="keywordtype">long</span> <a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a2726e1f32a987d973afd8d5dcc1b96b1">SchedSnap::storeSnap</a>( <span class="keyword">const</span> <a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html">persist::Database</a> &amp;db, <span class="keywordtype">long</span> <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a>, <span class="keywordtype">double</span> seconds ) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO schedstat (snapshot,forks,ctxsw,load5,load10,load15,runq,blockq) VALUES ( \</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="stringliteral">                     :snapid, \</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="stringliteral">                     :forks, \</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="stringliteral">                     :ctxsw, \</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="stringliteral">                     :load5, \</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="stringliteral">                     :load10, \</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="stringliteral">                     :load15, \</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="stringliteral">                     :runq, \</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="stringliteral">                     :blockq )&quot;</span> );</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a> );</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, (<a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a749d191a03638897ca203e6349bb98c1">sched2_</a>.<a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#aa91ada887b0ea2f7f984797b21cae3e8">processes</a>-<a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#ae2ac34d0684cf4ae4d8a99cda449c7b7">sched1_</a>.<a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#aa91ada887b0ea2f7f984797b21cae3e8">processes</a>)/seconds );</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, (<a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a749d191a03638897ca203e6349bb98c1">sched2_</a>.<a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#a3377179d8348e8fd57bc0193e9cb5865">ctxt</a>-<a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#ae2ac34d0684cf4ae4d8a99cda449c7b7">sched1_</a>.<a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#a3377179d8348e8fd57bc0193e9cb5865">ctxt</a>)/seconds );</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 4, <a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a75af41bba63ce8431a38fa73929c46da">load2_</a>.<a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#a3a0004a6d64bc32cd54bb0bca9621d04">avg5_</a> );</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 5, <a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a75af41bba63ce8431a38fa73929c46da">load2_</a>.<a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#a83b2d7f49aba0f64199f808dbaaa702f">avg10_</a> );</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 6, <a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a75af41bba63ce8431a38fa73929c46da">load2_</a>.<a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#abfc5428918d25d231dca77161bf07bdb">avg15_</a> );</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 7, (<span class="keywordtype">long</span>)<a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a749d191a03638897ca203e6349bb98c1">sched2_</a>.<a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#a88c36bfee2650c04ed06017af7fe2ba0">running</a> );</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 8, (<span class="keywordtype">long</span>)<a class="code" href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a749d191a03638897ca203e6349bb98c1">sched2_</a>.<a class="code" href="../../da/da3/namespaceleanux_1_1cpu.html#a5d7514f5473fc70435813857f2e4e040">blocked</a> );</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#a856922288b7d4d63dd2f173ee7eb0dd3">  263</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#a856922288b7d4d63dd2f173ee7eb0dd3">NetSnap::startSnap</a>() {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <a class="code" href="../../d5/db8/namespaceleanux_1_1net.html#ac78d924eb899ccfa62581ec1d13dc75b">net::getNetStat</a>( <a class="code" href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#ae8cd4335baf9f198502d69d685b95b38">stat1_</a> );</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#a7a429b2ea8298f49fbd0e0f9c70d7fc7">  267</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#a7a429b2ea8298f49fbd0e0f9c70d7fc7">NetSnap::stopSnap</a>() {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="../../d5/db8/namespaceleanux_1_1net.html#ac78d924eb899ccfa62581ec1d13dc75b">net::getNetStat</a>( <a class="code" href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#ae435da0b37eaa1318ab2b58d2a6ec668">stat2_</a> );</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#a6a04b1f2237b5fe9ac5f7be64721f23f">  271</a></span>&#160;      <span class="keywordtype">long</span> <a class="code" href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#a6a04b1f2237b5fe9ac5f7be64721f23f">NetSnap::storeSnap</a>( <span class="keyword">const</span> <a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html">persist::Database</a> &amp;db, <span class="keywordtype">long</span> <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a>, <span class="keywordtype">double</span> seconds ) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">for</span> ( net::NetStatDeviceMap::const_iterator s2 = <a class="code" href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#ae435da0b37eaa1318ab2b58d2a6ec668">stat2_</a>.begin(); s2 != <a class="code" href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#ae435da0b37eaa1318ab2b58d2a6ec668">stat2_</a>.end(); ++s2 ) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;          net::NetStatDeviceMap::const_iterator s1 = <a class="code" href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#ae8cd4335baf9f198502d69d685b95b38">stat1_</a>.find(s2-&gt;first);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          <span class="keywordflow">if</span> ( s1 != <a class="code" href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#ae8cd4335baf9f198502d69d685b95b38">stat1_</a>.end() ) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            std::string mac = <a class="code" href="../../d5/db8/namespaceleanux_1_1net.html#a6fd1c299c0eb06a5dece79bb60649d10">net::getDeviceMACAddress</a>( s1-&gt;first );</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            std::string syspath = <a class="code" href="../../d5/db8/namespaceleanux_1_1net.html#a29ff3c5a7e99221cc3bfe72405f72a08">net::getSysPath</a>( s1-&gt;first );</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keywordtype">long</span> nicid = 0;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html">persist::Query</a> qry(db);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            qry.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;SELECT id FROM nic WHERE mac=:mac and syspath=:syspath&quot;</span> );</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            qry.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, mac );</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            qry.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, syspath );</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordflow">if</span> ( qry.<a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#a294e11c33a22761503c49418f5ca9815">step</a>() ) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;              nicid = qry.<a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#ada37977ad924b728401fa1fb7506cd2e">getLong</a>(0);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;              <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;              dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO nic (device,mac,syspath) VALUES (:device,:mac,:syspath)&quot;</span> );</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, s1-&gt;first );</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, mac );</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, syspath );</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;              nicid = db.<a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html#ad2d6eb77b4fe786579b5447fd1b692bf">lastInsertRowid</a>();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO netstat (snapshot,nic,rxbs,txbs,rxpkts,txpkts,rxerrs,txerrs) VALUES ( \</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="stringliteral">              :snapid, \</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="stringliteral">              :nic, \</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="stringliteral">              :rxbs, \</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="stringliteral">              :txbs, \</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="stringliteral">              :rxpkts, \</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="stringliteral">              :txpkts, \</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="stringliteral">              :rxerrs, \</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="stringliteral">              :txerrs \</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="stringliteral">              )&quot;</span> );</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="keywordtype">double</span> d_rx_bytes = s2-&gt;second.rx_bytes - s1-&gt;second.rx_bytes;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="keywordtype">double</span> d_tx_bytes = s2-&gt;second.tx_bytes - s1-&gt;second.tx_bytes;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordtype">double</span> d_rx_packets = s2-&gt;second.rx_packets - s1-&gt;second.rx_packets;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordtype">double</span> d_tx_packets = s2-&gt;second.tx_packets - s1-&gt;second.tx_packets;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordtype">double</span> d_rx_errors = s2-&gt;second.rx_errors - s1-&gt;second.rx_errors;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordtype">double</span> d_tx_errors = s2-&gt;second.tx_errors - s1-&gt;second.tx_errors;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a> );</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, nicid );</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, d_rx_bytes/seconds );</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 4, d_tx_bytes/seconds );</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 5, d_rx_packets/seconds );</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 6, d_tx_packets/seconds );</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 7, d_rx_errors/seconds );</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 8, d_tx_errors/seconds );</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;          }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a37c5af9624501ff9094fcd956863bad0">  328</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a37c5af9624501ff9094fcd956863bad0">VMSnap::startSnap</a>() {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#afaf001154952f8397853ca745110020e">vmem::getVMStat</a>( <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a709d275ddbf602e20d6b0b55586c7fd5">stat1_</a> );</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#ac8539527962d0d32339ea8e64820a1a4">  332</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#ac8539527962d0d32339ea8e64820a1a4">VMSnap::stopSnap</a>() {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#afaf001154952f8397853ca745110020e">vmem::getVMStat</a>( <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a> );</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#ad7ebbd5cb631d19b7c1a08aeeb7e138b">  336</a></span>&#160;      <span class="keywordtype">long</span> <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#ad7ebbd5cb631d19b7c1a08aeeb7e138b">VMSnap::storeSnap</a>( <span class="keyword">const</span> <a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html">persist::Database</a> &amp;db, <span class="keywordtype">long</span> <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a>, <span class="keywordtype">double</span> seconds ) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordtype">long</span> pagesize = <a class="code" href="../../dd/d42/namespaceleanux_1_1system.html#a52dc747f7af9f66fabb1ccfd72c7c450">system::getPageSize</a>();</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        std::list&lt;vmem::SwapInfo&gt; swaps;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#aabc162dbfa4e98a5d1bf2571ba58de88">vmem::getSwapInfo</a>( swaps );</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordtype">double</span> swpused = 0;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordtype">double</span> swpsize = 0;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">for</span> ( std::list&lt;vmem::SwapInfo&gt;::const_iterator i = swaps.begin(); i != swaps.end(); i++ ) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;          swpused += (*i).used;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;          swpsize+= (*i).size;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO vmstat (snapshot,realmem,unused,commitas,anon,file,shmem,slab,pagetbls,dirty,pgins,pgouts,swpins,swpouts, \</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="stringliteral">                      hptotal,hprsvd,hpfree,thpanon,mlock,mapped,swpused,swpsize,minflts,majflts,allocs,frees) VALUES ( \</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="stringliteral">                     :snapid, \</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="stringliteral">                     :realmem, \</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="stringliteral">                     :unused, \</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="stringliteral">                     :commitas, \</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="stringliteral">                     :anon, \</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="stringliteral">                     :file, \</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="stringliteral">                     :shmem, \</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="stringliteral">                     :slab, \</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="stringliteral">                     :pagetbls, \</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="stringliteral">                     :dirty, \</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="stringliteral">                     :pgins, \</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="stringliteral">                     :pgouts, \</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="stringliteral">                     :swpins, \</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="stringliteral">                     :swpouts, \</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="stringliteral">                     :hptotal, \</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="stringliteral">                     :hprsvd, \</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="stringliteral">                     :hpfree, \</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="stringliteral">                     :thpanon, \</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="stringliteral">                     :mlock, \</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="stringliteral">                     :mapped, \</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="stringliteral">                     :swpused, \</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="stringliteral">                     :swpsize, \</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="stringliteral">                     :minflts, \</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="stringliteral">                     :majflts, \</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="stringliteral">                     :allocs, \</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="stringliteral">                     :frees )&quot;</span> );</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a> );</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a59a4322a73b3d393f11ff78a087c57c6">mem_total</a> );</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#ad7806aa24d50622cb567e500404fbb4c">nr_free_pages</a>*pagesize );</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 4, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a5f300e5e6c4518aa8dee4d151aaf4ba7">committed_as</a> );</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 5, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#acbf8e8e29577892b5cd911a2d10a2a96">nr_anon_pages</a>*pagesize );</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 6, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a2ec7264215b36335734fad97427e5e5d">nr_file_pages</a>*pagesize );</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 7, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#afedf0b80df60c72d39c53056e755bbf1">nr_shmem</a>*pagesize );</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 8, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a88034aaec4e3676e338c6739796c9cea">nr_slab_reclaimable</a>*pagesize+(<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a9bd8bd4fac876cbf81c2affecbd0c40e">nr_slab_unreclaimable</a>*pagesize );</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 9, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#ad5eb0802990129da600def836e33385f">nr_page_table_pages</a>*pagesize );</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 10, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a21163208b4348790537cd8e65d7b031e">nr_dirty</a>*pagesize );</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 11, (<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#aad5590b405fd21605d6bd45c899cc8d4">pgpgin</a> - <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a709d275ddbf602e20d6b0b55586c7fd5">stat1_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#aad5590b405fd21605d6bd45c899cc8d4">pgpgin</a>) / seconds );</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 12, (<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a3b79ad04509bbf977e1f080dea483b80">pgpgout</a> - <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a709d275ddbf602e20d6b0b55586c7fd5">stat1_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a3b79ad04509bbf977e1f080dea483b80">pgpgout</a>) / seconds );</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 13, (<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a82c3f6640ff3f5778228225672c59fff">pswpin</a> - <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a709d275ddbf602e20d6b0b55586c7fd5">stat1_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a82c3f6640ff3f5778228225672c59fff">pswpin</a>) / seconds );</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 14, (<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#afbb9a03d0d798094fe753a03cc0662d8">pswpout</a> - <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a709d275ddbf602e20d6b0b55586c7fd5">stat1_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#afbb9a03d0d798094fe753a03cc0662d8">pswpout</a>) / seconds );</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 15, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#ae4b90e462618eb01d2446381b3bd60ac">hugepages_total</a>*(<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a8cde0b9ae698c83dfef47b878a283a11">hugepagesize</a> );</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 16, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#ae5b5ea9ea10c649e527b270c01921e69">hugepages_reserved</a>*(<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a8cde0b9ae698c83dfef47b878a283a11">hugepagesize</a> );</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 17, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a751b94e9b5deface50ac277b669b31bd">hugepages_free</a>*(<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a8cde0b9ae698c83dfef47b878a283a11">hugepagesize</a> );</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 18, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a33a513a4e5b54a299faa34504466306a">nr_anon_transparent_hugepages</a>*(<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a8cde0b9ae698c83dfef47b878a283a11">hugepagesize</a> );</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 19, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a68bcf19c6243e99a12c9a4096cb84b60">nr_mlock</a>*pagesize );</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 20, (<span class="keywordtype">long</span>)<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#ace68d883666a1ca1c069c2c4efb10092">nr_mapped</a>*pagesize );</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 21, swpused );</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 22, swpsize );</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 23, (<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a0879751188598f00195732d8b1495b68">pgfault</a> - <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a709d275ddbf602e20d6b0b55586c7fd5">stat1_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a0879751188598f00195732d8b1495b68">pgfault</a>) / seconds );</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 24, (<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#aa43ef6b492316433053c36f0c6decca7">pgmajfault</a> - <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a709d275ddbf602e20d6b0b55586c7fd5">stat1_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#aa43ef6b492316433053c36f0c6decca7">pgmajfault</a>) / seconds );</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 25, (<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#aa5f055f2358a261fae3d94ea75abb73c">pgalloc_normal</a> + <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#abcbc7cdb3ec3c61969be3b153f808b61">pgalloc_dma</a> + <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#ad185f2b01a600e08344530767f675c1e">pgalloc_dma32</a> + <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a5d8045f4af5b2b0eecc87e6994ab1f32">pgalloc_movable</a> -</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                       <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a709d275ddbf602e20d6b0b55586c7fd5">stat1_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#aa5f055f2358a261fae3d94ea75abb73c">pgalloc_normal</a> - <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a709d275ddbf602e20d6b0b55586c7fd5">stat1_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#abcbc7cdb3ec3c61969be3b153f808b61">pgalloc_dma</a> - <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a709d275ddbf602e20d6b0b55586c7fd5">stat1_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#ad185f2b01a600e08344530767f675c1e">pgalloc_dma32</a> - <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a709d275ddbf602e20d6b0b55586c7fd5">stat1_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a5d8045f4af5b2b0eecc87e6994ab1f32">pgalloc_movable</a>) / seconds );</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 26, (<a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">stat2_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a3aabe3c1ac2222d9a3a1262b7d03f798">pgfree</a> - <a class="code" href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a709d275ddbf602e20d6b0b55586c7fd5">stat1_</a>.<a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#a3aabe3c1ac2222d9a3a1262b7d03f798">pgfree</a>) / seconds );</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#ab54043cba9664efa3321d9456c9bb3a0">  408</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#ab54043cba9664efa3321d9456c9bb3a0">ProcSnap::startSnap</a>() {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <a class="code" href="../../d9/d34/namespaceleanux_1_1process.html#a385cafe09f0dc82ce8a830124665d69d">process::getAllProcPidStat</a>( <a class="code" href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#a72642854986fa7b770e892911deca967">snap1_</a> );</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#a2922f8c93498c97d1b47ec2e6b7d817d">  412</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#a2922f8c93498c97d1b47ec2e6b7d817d">ProcSnap::stopSnap</a>() {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <a class="code" href="../../d9/d34/namespaceleanux_1_1process.html#a385cafe09f0dc82ce8a830124665d69d">process::getAllProcPidStat</a>( <a class="code" href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#a05c2d59808e0cfd540298e67fa687f12">snap2_</a> );</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#ab816bcbf8f8986599df48ee7131c10fb">  416</a></span>&#160;      <span class="keywordtype">long</span> <a class="code" href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#ab816bcbf8f8986599df48ee7131c10fb">ProcSnap::storeSnap</a>( <span class="keyword">const</span> <a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html">persist::Database</a> &amp;db, <span class="keywordtype">long</span> <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a>, <span class="keywordtype">double</span> seconds ) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <a class="code" href="../../d9/d34/namespaceleanux_1_1process.html#a342f1615ea084dae220d00aec56204ee">process::ProcPidStatDeltaVector</a> delta;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <a class="code" href="../../d9/d34/namespaceleanux_1_1process.html#a016ba417c40324fe090a55a67d3ca2a6">process::deltaProcPidStats</a>( <a class="code" href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#a72642854986fa7b770e892911deca967">snap1_</a>, <a class="code" href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#a05c2d59808e0cfd540298e67fa687f12">snap2_</a>, delta );</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <a class="code" href="../../d8/d39/classleanux_1_1process_1_1StatsSorter.html">process::StatsSorter</a> my_sorter( <a class="code" href="../../d8/d39/classleanux_1_1process_1_1StatsSorter.html#a861b54c618426ee71645e7388630a112ad8fa87a6e5a3924b7b74b5ce173882c5">leanux::process::StatsSorter::top</a> );</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        std::sort( delta.begin(), delta.end(), my_sorter );</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html">persist::Query</a> qry_cmd(db);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        qry_cmd.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;SELECT id FROM cmd WHERE cmd=:cmd and args=:args&quot;</span> );</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html">persist::Query</a> qry_wchan(db);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        qry_wchan.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;SELECT id FROM wchan WHERE wchan=:wchan&quot;</span> );</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordtype">int</span> maxrow = 0;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordtype">long</span> cmdid = 0;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordtype">long</span> wchanid = 0;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordtype">long</span> max_proc = <a class="code" href="../../de/d84/classleanux_1_1util_1_1ConfigFile.html#a8cef175948cd9727c732de3a605c99ba">util::ConfigFile::getConfig</a>()-&gt;<a class="code" href="../../de/d84/classleanux_1_1util_1_1ConfigFile.html#aae0c3891e3d5a8d391a7439602b92780">getIntValue</a>(<span class="stringliteral">&quot;MAX_PROCESSES&quot;</span>);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">for</span> ( leanux::process::ProcPidStatDeltaVector::const_iterator i = delta.begin(); i != delta.end() &amp;&amp; maxrow &lt; max_proc; i++, maxrow++ ) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;          qry_cmd.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a4696481e678f7c7337c07c480ee985ec">reset</a>();</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;          std::list&lt;std::string&gt; excludecmdargs = <a class="code" href="../../de/d84/classleanux_1_1util_1_1ConfigFile.html#a8cef175948cd9727c732de3a605c99ba">util::ConfigFile::getConfig</a>()-&gt;<a class="code" href="../../de/d84/classleanux_1_1util_1_1ConfigFile.html#af62cc2be1bf08d122bd390f18a886fdc">getStringListValue</a>(<span class="stringliteral">&quot;COMMAND_ARGS_IGNORE&quot;</span>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;          std::string args = <a class="code" href="../../d9/d34/namespaceleanux_1_1process.html#a92d013dc3ef32fd9b987b410b1ad2edc">process::getProcCmdLine</a>( (*i).pid );</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;          <span class="keywordflow">for</span> ( std::list&lt;std::string&gt;::const_iterator e = excludecmdargs.begin(); e != excludecmdargs.end(); e++ ) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keywordflow">if</span> ( strncmp( (*e).c_str(), <a class="code" href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#a05c2d59808e0cfd540298e67fa687f12">snap2_</a>[(*i).pid].comm.c_str(), <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a70c410eb53597a11002d0d27c6ca0a67">task_comm_len</a> ) == 0 ) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;              args = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          qry_cmd.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, <a class="code" href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#a05c2d59808e0cfd540298e67fa687f12">snap2_</a>[(*i).pid].comm );</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;          qry_cmd.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, args );</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;          <span class="keywordflow">if</span> ( qry_cmd.<a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#a294e11c33a22761503c49418f5ca9815">step</a>() ) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            cmdid = qry_cmd.<a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#ada37977ad924b728401fa1fb7506cd2e">getLong</a>(0);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO cmd (cmd, args) VALUES (:cmd, :args)&quot;</span> );</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, <a class="code" href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#a05c2d59808e0cfd540298e67fa687f12">snap2_</a>[(*i).pid].comm );</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, args );</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            cmdid = db.<a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html#ad2d6eb77b4fe786579b5447fd1b692bf">lastInsertRowid</a>();</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;          }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;          <span class="keywordflow">if</span> ( (*i).state == <span class="charliteral">&#39;D&#39;</span> ) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            qry_wchan.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a4696481e678f7c7337c07c480ee985ec">reset</a>();</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            qry_wchan.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, (*i).wchan );</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">if</span> ( qry_wchan.<a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#a294e11c33a22761503c49418f5ca9815">step</a>() ) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;              wchanid = qry_wchan.<a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#ada37977ad924b728401fa1fb7506cd2e">getLong</a>(0);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;              <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;              dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO wchan (wchan) VALUES (:wchan)&quot;</span> );</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, (*i).wchan );</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;              wchanid = db.<a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html#ad2d6eb77b4fe786579b5447fd1b692bf">lastInsertRowid</a>();</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;          }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;          <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO procstat (snapshot,pid,pgrp,state,uid,cmd,usercpu,systemcpu,iotime,minflt,majflt,rss,vsz,wchan) VALUES ( \</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="stringliteral">            :snapid, \</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="stringliteral">            :pid, \</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="stringliteral">            :pgrp, \</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="stringliteral">            :state, \</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="stringliteral">            :uid, \</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="stringliteral">            :cmd, \</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="stringliteral">            :usercpu, \</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="stringliteral">            :systemcpu, \</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="stringliteral">            :iotime, \</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="stringliteral">            :minflt, \</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="stringliteral">            :majflt, \</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="stringliteral">            :rss, \</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="stringliteral">            :vsz, \</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="stringliteral">            :wchan \</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="stringliteral">            )&quot;</span> );</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a> );</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, (*i).pid );</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, (*i).pgrp );</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;          std::string sstate = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;          sstate += (*i).state;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 4, sstate );</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;          uid_t uid = 0;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;          <span class="keywordflow">if</span> ( !<a class="code" href="../../d9/d34/namespaceleanux_1_1process.html#a25f41d972bb92c8cbe982e0c74c68f7d">process::getProcUid</a>( (*i).pid, uid ) ) uid = 20041968;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 5,  (<span class="keywordtype">long</span>)uid );</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 6, cmdid );</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 7, (*i).utime/seconds );</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 8, (*i).stime/seconds );</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 9, (*i).delayacct_blkio_ticks/seconds );</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 10, (*i).minflt/seconds );</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 11, (*i).majflt/seconds );</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 12, (<span class="keywordtype">long</span>)(*i).rss );</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 13, (<span class="keywordtype">long</span>)(*i).vsize );</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;          <span class="keywordflow">if</span> ( (*i).state == <span class="charliteral">&#39;D&#39;</span> ) dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 14, wchanid ); <span class="keywordflow">else</span> dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 14, 0 );</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno"><a class="line" href="../../d4/d46/classleanux_1_1tools_1_1lard_1_1ResSnap.html#ad254ff88d977694c1cdc2aa2d374083e">  512</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d4/d46/classleanux_1_1tools_1_1lard_1_1ResSnap.html#ad254ff88d977694c1cdc2aa2d374083e">ResSnap::startSnap</a>() {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno"><a class="line" href="../../d4/d46/classleanux_1_1tools_1_1lard_1_1ResSnap.html#a1ab5935f077d0fba67e810019d62b307">  515</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d4/d46/classleanux_1_1tools_1_1lard_1_1ResSnap.html#a1ab5935f077d0fba67e810019d62b307">ResSnap::stopSnap</a>() {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno"><a class="line" href="../../d4/d46/classleanux_1_1tools_1_1lard_1_1ResSnap.html#a03496036d673feae3ae05cd1106c2858">  518</a></span>&#160;      <span class="keywordtype">long</span> <a class="code" href="../../d4/d46/classleanux_1_1tools_1_1lard_1_1ResSnap.html#a03496036d673feae3ae05cd1106c2858">ResSnap::storeSnap</a>( <span class="keyword">const</span> <a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html">persist::Database</a> &amp;db, <span class="keywordtype">long</span> <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a>, <span class="keywordtype">double</span> seconds ) {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO resstat (snapshot,processes,users,logins,files_open,files_max,inodes_open,inodes_free) VALUES ( \</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="stringliteral">                     :snapid, \</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="stringliteral">                     :processes, \</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="stringliteral">                     :users, \</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="stringliteral">                     :logins, \</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="stringliteral">                     :files_open, \</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="stringliteral">                     :files_max, \</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="stringliteral">                     :inodes_open, \</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="stringliteral">                     :inodes_free)&quot;</span> );</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a> );</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> processes = 0;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <a class="code" href="../../dd/d42/namespaceleanux_1_1system.html#acf5450712deab2fd3ebe192a290c4bc6">system::getNumProcesses</a>( &amp;processes );</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, (<span class="keywordtype">long</span>)processes );</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, (<span class="keywordtype">long</span>)<a class="code" href="../../dd/d42/namespaceleanux_1_1system.html#a9821718a0beca2213c2f294267255d59">system::getNumLoginUsers</a>() );</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 4, (<span class="keywordtype">long</span>)<a class="code" href="../../dd/d42/namespaceleanux_1_1system.html#a3cdfe742d15c8f3d4d7c01be3f3b42c7">system::getNumLogins</a>() );</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> used,max,free;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <a class="code" href="../../dd/d42/namespaceleanux_1_1system.html#a0fcf2d5d45e7838be8424cf1eabeeb14">system::getOpenFiles</a>( &amp;used, &amp;max );</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 5, (<span class="keywordtype">long</span>)used );</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 6, (<span class="keywordtype">long</span>)max );</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <a class="code" href="../../dd/d42/namespaceleanux_1_1system.html#aa437aedfc8ba5b977baef289f25c5da3">system::getOpenInodes</a>( &amp;used, &amp;free );</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 7, (<span class="keywordtype">long</span>)used );</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 8, (<span class="keywordtype">long</span>)free );</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      std::map&lt;std::string,block::MajorMinor&gt; <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a2a658a236df34a664df502a48f4f0f1b">MountSnap::devicefilecache_</a>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a934aedfb855a789ff7039b23112c4ae1">  552</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a934aedfb855a789ff7039b23112c4ae1">MountSnap::startSnap</a>() {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <a class="code" href="../../d5/d01/namespaceleanux_1_1block.html#ae227ed1fa83d91988072e335ea0f81e9">block::getStats</a>( <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a3c5bd0fe4bfe2c3efe67a2ba4c03ae11">stat1_</a> );</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a03ffa5736036aaed951d16b51d181c29">  556</a></span>&#160;      <span class="keywordtype">void</span> <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a03ffa5736036aaed951d16b51d181c29">MountSnap::stopSnap</a>() {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <a class="code" href="../../d5/d01/namespaceleanux_1_1block.html#ae227ed1fa83d91988072e335ea0f81e9">block::getStats</a>( <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a120530cc1c41a9f94c226a2e804de745">stat2_</a> );</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a6dc9b399cf8e065067a11a6e0d8c17f9">fsbytes1_</a> = <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a9c07dcd871a1855ae37ea417760386b3">fsbytes2_</a>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        std::map&lt;block::MajorMinor,block::MountInfo&gt; mounts;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <a class="code" href="../../d5/d01/namespaceleanux_1_1block.html#afaee6721d578e4e9ccbebb7dea5919a6">enumMounts</a>( mounts, <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a2a658a236df34a664df502a48f4f0f1b">devicefilecache_</a> );</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="keywordflow">for</span> ( std::map&lt;block::MajorMinor,block::MountInfo&gt;::const_iterator m = mounts.begin(); m != mounts.end(); ++m ) {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;          <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a9c07dcd871a1855ae37ea417760386b3">fsbytes2_</a>[m-&gt;second.mountpoint] = <a class="code" href="../../d5/d01/namespaceleanux_1_1block.html#a0a3be314ae37f554ef89d7b5b30a8039">block::getMountUsedBytes</a>( m-&gt;second.mountpoint );</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a7288efb64fc31818416b8c52c4ba3a0d">  568</a></span>&#160;      <span class="keywordtype">long</span> <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a7288efb64fc31818416b8c52c4ba3a0d">MountSnap::storeSnap</a>( <span class="keyword">const</span> <a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html">persist::Database</a> &amp;db, <span class="keywordtype">long</span> <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a>, <span class="keywordtype">double</span> seconds ) {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        std::map&lt;block::MajorMinor,block::MountInfo&gt; mounts;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <a class="code" href="../../d5/d01/namespaceleanux_1_1block.html#afaee6721d578e4e9ccbebb7dea5919a6">block::enumMounts</a>( mounts, <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a2a658a236df34a664df502a48f4f0f1b">devicefilecache_</a> );</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <a class="code" href="../../d5/d01/namespaceleanux_1_1block.html#aa840e578e98199d5f3f2cdd80e356778">block::DeviceStatsMap</a> delta;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <a class="code" href="../../d5/d01/namespaceleanux_1_1block.html#a4e93a020cb6003bed11dd67f7e02434f">block::MajorMinorVector</a> vec;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <a class="code" href="../../d5/d01/namespaceleanux_1_1block.html#aa7dafdc339a1159d4364e877a7453c03">block::deltaDeviceStats</a>( <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a3c5bd0fe4bfe2c3efe67a2ba4c03ae11">stat1_</a>, <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a120530cc1c41a9f94c226a2e804de745">stat2_</a>, delta, vec );</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <a class="code" href="../../d4/d1c/classleanux_1_1block_1_1StatsSorter.html">block::StatsSorter</a> sorter( &amp;delta );</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        sort( vec.begin(), vec.end(), sorter );</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordtype">long</span> stored_mounts = 0;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html">persist::Query</a> qry(db);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        qry.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;SELECT id FROM mountpoint WHERE mountpoint=:mountpoint&quot;</span> );</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">for</span> ( block::MajorMinorVector::const_iterator d = vec.begin(); d != vec.end(); d++ ) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;          <span class="keywordtype">bool</span> isswap = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;          std::string mp = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;          std::map&lt;block::MajorMinor,block::MountInfo&gt;::const_iterator m = mounts.find( *d );</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;          <span class="keywordflow">if</span> ( m == mounts.end() ) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            std::list&lt;vmem::SwapInfo&gt; swaps;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            <a class="code" href="../../dc/d32/namespaceleanux_1_1vmem.html#aabc162dbfa4e98a5d1bf2571ba58de88">vmem::getSwapInfo</a>( swaps );</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="keywordflow">for</span> ( std::list&lt;vmem::SwapInfo&gt;::const_iterator i = swaps.begin(); i != swaps.end(); i++ ) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;              <span class="keywordflow">if</span> ( <a class="code" href="../../d5/d01/namespaceleanux_1_1block.html#a12e7b3a8ce8e601504f25c9c3e2fa7f0">block::getFileMajorMinor</a>( (*i).devicefile ) == *d ) {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                isswap = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                std::stringstream sswap;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                sswap &lt;&lt; <span class="stringliteral">&quot;swap:&quot;</span> &lt;&lt; (*i).devicefile;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                mp = sswap.str();</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;              }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;          } <span class="keywordflow">else</span> mp = mounts[*d].mountpoint;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;          <span class="keywordflow">if</span> ( m != mounts.end() || isswap ) {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            qry.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a4696481e678f7c7337c07c480ee985ec">reset</a>();</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            qry.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, mp );</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordtype">long</span> mpid = 0;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            <span class="keywordflow">if</span> ( qry.<a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#a294e11c33a22761503c49418f5ca9815">step</a>() ) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;              mpid = qry.<a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#ada37977ad924b728401fa1fb7506cd2e">getLong</a>(0);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;              <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;              dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO mountpoint (mountpoint) VALUES (:mountpoint)&quot;</span> );</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, mp );</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;              mpid = db.<a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html#ad2d6eb77b4fe786579b5447fd1b692bf">lastInsertRowid</a>();</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO mountstat VALUES ( \</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="stringliteral">              :snapid, \</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="stringliteral">              :mountpoint, \</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="stringliteral">              :util, \</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="stringliteral">              :svctm, \</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="stringliteral">              :rs, \</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="stringliteral">              :ws, \</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="stringliteral">              :rbs, \</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="stringliteral">              :wbs, \</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="stringliteral">              :artm, \</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="stringliteral">              :awtm, \</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="stringliteral">              :growth, \</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="stringliteral">              :used \</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="stringliteral">              )&quot;</span> );</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a> );</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, mpid );</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, delta[*d].io_ms/1000.0/seconds  );</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="keywordflow">if</span> ( delta[*d].reads+delta[*d].writes &gt; 0 )</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 4, delta[*d].io_ms/1000.0/(delta[*d].reads+delta[*d].writes)  );</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 4, 0.0  );</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 5, delta[*d].reads/seconds  );</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 6, delta[*d].writes/seconds  );</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 7, delta[*d].read_sectors*(*d).getSectorSize()/seconds );</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 8, delta[*d].write_sectors*(*d).getSectorSize()/seconds );</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            <span class="keywordflow">if</span> ( delta[*d].reads &gt; 0 )</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 9, delta[*d].read_ms/1000.0/delta[*d].reads );</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 9, 0 );</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="keywordflow">if</span> ( delta[*d].writes &gt; 0 )</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 10, delta[*d].write_ms/1000.0/delta[*d].writes );</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 10, 0 );</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            <span class="keywordflow">if</span> ( isswap ) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 11, 0 );</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;              dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 12, 0 );</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;              std::map&lt;std::string,unsigned long&gt;::const_iterator m1,m2;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;              m1 = <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a6dc9b399cf8e065067a11a6e0d8c17f9">fsbytes1_</a>.find( m-&gt;second.mountpoint );</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;              m2 = <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a9c07dcd871a1855ae37ea417760386b3">fsbytes2_</a>.find( m-&gt;second.mountpoint );</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;              <span class="keywordflow">if</span> ( m1 != <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a6dc9b399cf8e065067a11a6e0d8c17f9">fsbytes1_</a>.end() &amp;&amp; m2 != <a class="code" href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a9c07dcd871a1855ae37ea417760386b3">fsbytes2_</a>.end() ) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 11, ((<span class="keywordtype">double</span>)m2-&gt;second-(<span class="keywordtype">double</span>)m1-&gt;second)/seconds );</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 12, (<span class="keywordtype">double</span>)m2-&gt;second );</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;              } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 11, 0 );</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 12, 0 );</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;              }</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            stored_mounts++;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            qry.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a4696481e678f7c7337c07c480ee985ec">reset</a>();</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;          }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;          <span class="keywordflow">if</span> ( stored_mounts &gt;= <a class="code" href="../../de/d84/classleanux_1_1util_1_1ConfigFile.html#a8cef175948cd9727c732de3a605c99ba">util::ConfigFile::getConfig</a>()-&gt;getIntValue(<span class="stringliteral">&quot;MAX_MOUNTS&quot;</span>) ) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno"><a class="line" href="../../d7/dff/classleanux_1_1tools_1_1lard_1_1TCPEstaSnap.html#adc30b5d65eacc454cb653851f6180f8b">  670</a></span>&#160;      <span class="keywordtype">long</span> <a class="code" href="../../d7/dff/classleanux_1_1tools_1_1lard_1_1TCPEstaSnap.html#adc30b5d65eacc454cb653851f6180f8b">TCPEstaSnap::storeSnap</a>( <span class="keyword">const</span> <a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html">persist::Database</a> &amp;db, <span class="keywordtype">long</span> <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a>, <span class="keywordtype">double</span> seconds ) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        std::list&lt;net::TCPKeyCounter&gt; server;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        std::list&lt;net::TCPKeyCounter&gt; client;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <a class="code" href="../../d5/db8/namespaceleanux_1_1net.html#ae1bc6c94c0c1352bbad7abeb430dea86">getTCPConnectionCounters</a>( server, client );</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html">persist::Query</a> qry(db);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        qry.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;SELECT id FROM tcpkey WHERE ip=:ip AND port=:port AND uid=:uid&quot;</span> );</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <span class="keywordflow">for</span> ( std::list&lt;net::TCPKeyCounter&gt;::const_iterator i = server.begin(); i!= server.end(); i++ ) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;          qry.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a4696481e678f7c7337c07c480ee985ec">reset</a>();</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;          qry.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, (*i).getKey().getIP() );</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;          qry.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, (<span class="keywordtype">long</span>)(*i).getKey().getPort() );</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;          qry.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, (<span class="keywordtype">long</span>)(*i).getKey().getUID() );</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;          <span class="keywordtype">long</span> tcpkeyid = 0;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;          <span class="keywordflow">if</span> ( qry.<a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#a294e11c33a22761503c49418f5ca9815">step</a>() ) {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            tcpkeyid = qry.<a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#ada37977ad924b728401fa1fb7506cd2e">getLong</a>(0);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO tcpkey (ip,port,uid) VALUES (:ip,:port,:uid)&quot;</span> );</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, (*i).getKey().getIP() );</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, (<span class="keywordtype">long</span>)(*i).getKey().getPort() );</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, (<span class="keywordtype">long</span>)(*i).getKey().getUID() );</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            tcpkeyid = db.<a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html#ad2d6eb77b4fe786579b5447fd1b692bf">lastInsertRowid</a>();</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;          }</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;          <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;          dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO tcpserverstat VALUES ( \</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="stringliteral">            :snapid, \</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="stringliteral">            :tcpkey, \</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="stringliteral">            :esta \</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="stringliteral">            )&quot;</span> );</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a> );</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, tcpkeyid );</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, (<span class="keywordtype">long</span>)(*i).getEsta() );</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;          qry.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a4696481e678f7c7337c07c480ee985ec">reset</a>();</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">for</span> ( std::list&lt;net::TCPKeyCounter&gt;::const_iterator i = client.begin(); i!= client.end(); i++ ) {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;          qry.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;SELECT id FROM tcpkey WHERE ip=:ip AND port=:port AND uid=:uid&quot;</span> );</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;          qry.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, (*i).getKey().getIP() );</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;          qry.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, (<span class="keywordtype">long</span>)(*i).getKey().getPort() );</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;          qry.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, (<span class="keywordtype">long</span>)(*i).getKey().getUID() );</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;          <span class="keywordtype">long</span> tcpkeyid = 0;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;          <span class="keywordflow">if</span> ( qry.<a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#a294e11c33a22761503c49418f5ca9815">step</a>() ) {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            tcpkeyid = qry.<a class="code" href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#ada37977ad924b728401fa1fb7506cd2e">getLong</a>(0);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO tcpkey (ip,port,uid) VALUES (:ip,:port,:uid)&quot;</span> );</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, (*i).getKey().getIP() );</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, (<span class="keywordtype">long</span>)(*i).getKey().getPort() );</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, (<span class="keywordtype">long</span>)(*i).getKey().getUID() );</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            tcpkeyid = db.<a class="code" href="../../d8/daf/classleanux_1_1persist_1_1Database.html#ad2d6eb77b4fe786579b5447fd1b692bf">lastInsertRowid</a>();</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;          }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;          <a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html">persist::DML</a> dml(db);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;          dml.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">prepare</a>( <span class="stringliteral">&quot;INSERT INTO tcpclientstat VALUES ( \</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="stringliteral">            :snapid, \</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="stringliteral">            :tcpkey, \</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="stringliteral">            :esta \</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="stringliteral">            )&quot;</span> );</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 1, <a class="code" href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">snapid</a> );</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 2, tcpkeyid );</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">bind</a>( 3, (<span class="keywordtype">long</span>)(*i).getEsta() );</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;          dml.<a class="code" href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">execute</a>();</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;          qry.<a class="code" href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a4696481e678f7c7337c07c480ee985ec">reset</a>();</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    }; <span class="comment">// namespace lard</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  }; <span class="comment">// namespace tools</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;}; <span class="comment">// namespace leanux</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1CPUSnap_html_aa9b17773c81ccc4dc5767cf5bf25b715"><div class="ttname"><a href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#aa9b17773c81ccc4dc5767cf5bf25b715">leanux::tools::lard::CPUSnap::stat2_</a></div><div class="ttdeci">cpu::CPUStatsMap stat2_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00110">lar_snap.hpp:110</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1TimeSnap_html_ae4186449701030aec1986be6c197ba24"><div class="ttname"><a href="../../d3/d88/classleanux_1_1tools_1_1lard_1_1TimeSnap.html#ae4186449701030aec1986be6c197ba24">leanux::tools::lard::TimeSnap::storeSnap</a></div><div class="ttdeci">virtual long storeSnap(const persist::Database &amp;db, long snapid, double seconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00092">lar_snap.cpp:92</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1CPUSnap_html_ac6e10ceac5913085f93d730f5082fd9d"><div class="ttname"><a href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#ac6e10ceac5913085f93d730f5082fd9d">leanux::tools::lard::CPUSnap::stat1_</a></div><div class="ttdeci">cpu::CPUStatsMap stat1_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00109">lar_snap.hpp:109</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1TimeSnap_html_a94d6856ce0cb151cbdd9770f5d256ff3"><div class="ttname"><a href="../../d3/d88/classleanux_1_1tools_1_1lard_1_1TimeSnap.html#a94d6856ce0cb151cbdd9770f5d256ff3">leanux::tools::lard::TimeSnap::istart_</a></div><div class="ttdeci">time_t istart_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00080">lar_snap.hpp:80</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1cpu_html_a88c36bfee2650c04ed06017af7fe2ba0"><div class="ttname"><a href="../../da/da3/namespaceleanux_1_1cpu.html#a88c36bfee2650c04ed06017af7fe2ba0">leanux::cpu::SchedInfo::running</a></div><div class="ttdeci">unsigned int running</div><div class="ttdoc">the number of running processes (processes in state R).</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dbe/cpu_8hpp_source.html#l00192">cpu.hpp:192</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_ae4b90e462618eb01d2446381b3bd60ac"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#ae4b90e462618eb01d2446381b3bd60ac">leanux::vmem::VMStat::hugepages_total</a></div><div class="ttdeci">unsigned long hugepages_total</div><div class="ttdoc">total number of (fixed) hugepages</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00145">vmem.hpp:145</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1VMSnap_html_ac8539527962d0d32339ea8e64820a1a4"><div class="ttname"><a href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#ac8539527962d0d32339ea8e64820a1a4">leanux::tools::lard::VMSnap::stopSnap</a></div><div class="ttdeci">virtual void stopSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00332">lar_snap.cpp:332</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1tools_1_1lard_html_a70c410eb53597a11002d0d27c6ca0a67"><div class="ttname"><a href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a70c410eb53597a11002d0d27c6ca0a67">leanux::tools::lard::task_comm_len</a></div><div class="ttdeci">const size_t task_comm_len</div><div class="ttdoc">maximum size of a command name as tracked by the kernel.</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00054">lar_snap.cpp:54</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1SchedSnap_html_a1f5c38954ad5215a42babcb2086c146c"><div class="ttname"><a href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a1f5c38954ad5215a42babcb2086c146c">leanux::tools::lard::SchedSnap::load1_</a></div><div class="ttdeci">cpu::LoadAvg load1_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00125">lar_snap.hpp:125</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1MountSnap_html_a7288efb64fc31818416b8c52c4ba3a0d"><div class="ttname"><a href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a7288efb64fc31818416b8c52c4ba3a0d">leanux::tools::lard::MountSnap::storeSnap</a></div><div class="ttdeci">virtual long storeSnap(const persist::Database &amp;db, long snapid, double seconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00568">lar_snap.cpp:568</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1CPUSnap_html_af9c73b36a541b0eae3b06e491b9cdff0"><div class="ttname"><a href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#af9c73b36a541b0eae3b06e491b9cdff0">leanux::tools::lard::CPUSnap::stopSnap</a></div><div class="ttdeci">virtual void stopSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00189">lar_snap.cpp:189</a></div></div>
<div class="ttc" id="aclassleanux_1_1persist_1_1Query_html"><div class="ttname"><a href="../../d4/d2c/classleanux_1_1persist_1_1Query.html">leanux::persist::Query</a></div><div class="ttdoc">Queries can take bind values and return select lists.</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d27/persist_8hpp_source.html#l00297">persist.hpp:297</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1NetSnap_html_a6a04b1f2237b5fe9ac5f7be64721f23f"><div class="ttname"><a href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#a6a04b1f2237b5fe9ac5f7be64721f23f">leanux::tools::lard::NetSnap::storeSnap</a></div><div class="ttdeci">virtual long storeSnap(const persist::Database &amp;db, long snapid, double seconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00271">lar_snap.cpp:271</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a21163208b4348790537cd8e65d7b031e"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a21163208b4348790537cd8e65d7b031e">leanux::vmem::VMStat::nr_dirty</a></div><div class="ttdeci">unsigned long nr_dirty</div><div class="ttdoc">number of dirty file pages</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00082">vmem.hpp:82</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1ResSnap_html_ad254ff88d977694c1cdc2aa2d374083e"><div class="ttname"><a href="../../d4/d46/classleanux_1_1tools_1_1lard_1_1ResSnap.html#ad254ff88d977694c1cdc2aa2d374083e">leanux::tools::lard::ResSnap::startSnap</a></div><div class="ttdeci">virtual void startSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00512">lar_snap.cpp:512</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1CPUSnap_html_a08144ea8cd0e5e5ff868278abc111f44"><div class="ttname"><a href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#a08144ea8cd0e5e5ff868278abc111f44">leanux::tools::lard::CPUSnap::storeSnap</a></div><div class="ttdeci">virtual long storeSnap(const persist::Database &amp;db, long snapid, double seconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00193">lar_snap.cpp:193</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a751b94e9b5deface50ac277b669b31bd"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a751b94e9b5deface50ac277b669b31bd">leanux::vmem::VMStat::hugepages_free</a></div><div class="ttdeci">unsigned long hugepages_free</div><div class="ttdoc">total number of (fixed) hugepages unused</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00148">vmem.hpp:148</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1MountSnap_html_a2a658a236df34a664df502a48f4f0f1b"><div class="ttname"><a href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a2a658a236df34a664df502a48f4f0f1b">leanux::tools::lard::MountSnap::devicefilecache_</a></div><div class="ttdeci">static std::map&lt; std::string, block::MajorMinor &gt; devicefilecache_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00189">lar_snap.hpp:189</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_abcbc7cdb3ec3c61969be3b153f808b61"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#abcbc7cdb3ec3c61969be3b153f808b61">leanux::vmem::VMStat::pgalloc_dma</a></div><div class="ttdeci">unsigned long pgalloc_dma</div><div class="ttdoc">number of dma pages</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00124">vmem.hpp:124</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_ae5b5ea9ea10c649e527b270c01921e69"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#ae5b5ea9ea10c649e527b270c01921e69">leanux::vmem::VMStat::hugepages_reserved</a></div><div class="ttdeci">unsigned long hugepages_reserved</div><div class="ttdoc">total number of (fixed) hugepages unused but reserved</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00151">vmem.hpp:151</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1IOSnap_html_ae6647d279dcbab31b29db1e69549806c"><div class="ttname"><a href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#ae6647d279dcbab31b29db1e69549806c">leanux::tools::lard::IOSnap::stat1_</a></div><div class="ttdeci">block::DeviceStatsMap stat1_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00096">lar_snap.hpp:96</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1tools_1_1lard_html_ad9422852e8ee51e45a1e339314b6a4be"><div class="ttname"><a href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#ad9422852e8ee51e45a1e339314b6a4be">leanux::tools::lard::LOG_ERR</a></div><div class="ttdeci">const unsigned short LOG_ERR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00054">lar_snap.hpp:54</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1MountSnap_html_a3c5bd0fe4bfe2c3efe67a2ba4c03ae11"><div class="ttname"><a href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a3c5bd0fe4bfe2c3efe67a2ba4c03ae11">leanux::tools::lard::MountSnap::stat1_</a></div><div class="ttdeci">block::DeviceStatsMap stat1_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00190">lar_snap.hpp:190</a></div></div>
<div class="ttc" id="aclassleanux_1_1persist_1_1DML_html_a66bfdf8da5f7d2c02bb5cb6f54515783"><div class="ttname"><a href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a66bfdf8da5f7d2c02bb5cb6f54515783">leanux::persist::DML::execute</a></div><div class="ttdeci">void execute()</div><div class="ttdoc">Execute.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/persist_8cpp_source.html#l00403">persist.cpp:403</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1IOSnap_html_acd9defb7ca62e96d5f76b04b3e365b41"><div class="ttname"><a href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#acd9defb7ca62e96d5f76b04b3e365b41">leanux::tools::lard::IOSnap::storeSnap</a></div><div class="ttdeci">virtual long storeSnap(const persist::Database &amp;db, long snapid, double seconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00109">lar_snap.cpp:109</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1process_html_a92d013dc3ef32fd9b987b410b1ad2edc"><div class="ttname"><a href="../../d9/d34/namespaceleanux_1_1process.html#a92d013dc3ef32fd9b987b410b1ad2edc">leanux::process::getProcCmdLine</a></div><div class="ttdeci">std::string getProcCmdLine(pid_t pid)</div><div class="ttdoc">Get the pid's command line.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d4c/process_8cpp_source.html#l00157">process.cpp:157</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_acbf8e8e29577892b5cd911a2d10a2a96"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#acbf8e8e29577892b5cd911a2d10a2a96">leanux::vmem::VMStat::nr_anon_pages</a></div><div class="ttdeci">unsigned long nr_anon_pages</div><div class="ttdoc">number of anonymous pages</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00073">vmem.hpp:73</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1block_html_a0a3be314ae37f554ef89d7b5b30a8039"><div class="ttname"><a href="../../d5/d01/namespaceleanux_1_1block.html#a0a3be314ae37f554ef89d7b5b30a8039">leanux::block::getMountUsedBytes</a></div><div class="ttdeci">unsigned long getMountUsedBytes()</div><div class="ttdoc">Used bytes over all mounted filesystems.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4d/block_8cpp_source.html#l01316">block.cpp:1316</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1cpu_html_aa3faebda296d39bfcaaccfe9a8398ec0"><div class="ttname"><a href="../../da/da3/namespaceleanux_1_1cpu.html#aa3faebda296d39bfcaaccfe9a8398ec0">leanux::cpu::getCPUPhysicalId</a></div><div class="ttdeci">unsigned long getCPUPhysicalId(unsigned long logicalcpu)</div><div class="ttdoc">get the physical id of the logical CPU from /sys/devices/system/cpu/cpuX/physical_package_id.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dfc/cpu_8cpp_source.html#l00108">cpu.cpp:108</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1CPUSnap_html_a18e1fbcdf89ec7537bc853b314657890"><div class="ttname"><a href="../../d5/d03/classleanux_1_1tools_1_1lard_1_1CPUSnap.html#a18e1fbcdf89ec7537bc853b314657890">leanux::tools::lard::CPUSnap::startSnap</a></div><div class="ttdeci">virtual void startSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00185">lar_snap.cpp:185</a></div></div>
<div class="ttc" id="aclassleanux_1_1persist_1_1DML_html_a8df01a6d880515c22106e424ed342c81"><div class="ttname"><a href="../../d9/d78/classleanux_1_1persist_1_1DML.html#a8df01a6d880515c22106e424ed342c81">leanux::persist::DML::bind</a></div><div class="ttdeci">void bind(int position, double value)</div><div class="ttdoc">Bind a double value to the bind at position.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/persist_8cpp_source.html#l00410">persist.cpp:410</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1cpu_html_a3377179d8348e8fd57bc0193e9cb5865"><div class="ttname"><a href="../../da/da3/namespaceleanux_1_1cpu.html#a3377179d8348e8fd57bc0193e9cb5865">leanux::cpu::SchedInfo::ctxt</a></div><div class="ttdeci">unsigned long ctxt</div><div class="ttdoc">the total number of context switches since boot.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dbe/cpu_8hpp_source.html#l00198">cpu.hpp:198</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1SchedSnap_html_a2726e1f32a987d973afd8d5dcc1b96b1"><div class="ttname"><a href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a2726e1f32a987d973afd8d5dcc1b96b1">leanux::tools::lard::SchedSnap::storeSnap</a></div><div class="ttdeci">virtual long storeSnap(const persist::Database &amp;db, long snapid, double seconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00238">lar_snap.cpp:238</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1NetSnap_html_a7a429b2ea8298f49fbd0e0f9c70d7fc7"><div class="ttname"><a href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#a7a429b2ea8298f49fbd0e0f9c70d7fc7">leanux::tools::lard::NetSnap::stopSnap</a></div><div class="ttdeci">virtual void stopSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00267">lar_snap.cpp:267</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1process_html_a385cafe09f0dc82ce8a830124665d69d"><div class="ttname"><a href="../../d9/d34/namespaceleanux_1_1process.html#a385cafe09f0dc82ce8a830124665d69d">leanux::process::getAllProcPidStat</a></div><div class="ttdeci">void getAllProcPidStat(ProcPidStatMap &amp;stats)</div><div class="ttdoc">Get a snapshot of all pids (seen as /proc/PID) into a std::map keyed by pid_t.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d4c/process_8cpp_source.html#l00173">process.cpp:173</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_aabc162dbfa4e98a5d1bf2571ba58de88"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#aabc162dbfa4e98a5d1bf2571ba58de88">leanux::vmem::getSwapInfo</a></div><div class="ttdeci">void getSwapInfo(std::list&lt; SwapInfo &gt; &amp;swaps)</div><div class="ttdoc">Get a std::list of SwapInfo swap spaces.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d45/vmem_8cpp_source.html#l00143">vmem.cpp:143</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1block_html_a12e7b3a8ce8e601504f25c9c3e2fa7f0"><div class="ttname"><a href="../../d5/d01/namespaceleanux_1_1block.html#a12e7b3a8ce8e601504f25c9c3e2fa7f0">leanux::block::getFileMajorMinor</a></div><div class="ttdeci">MajorMinor getFileMajorMinor(const std::string &amp;devicefile)</div><div class="ttdoc">get the MajorMinor for a device file or aliases to it, resolves the devicefile with realpath.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4d/block_8cpp_source.html#l01024">block.cpp:1024</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1cpu_html_a59cf2af9830e859ca848f87c9d605d6f"><div class="ttname"><a href="../../da/da3/namespaceleanux_1_1cpu.html#a59cf2af9830e859ca848f87c9d605d6f">leanux::cpu::getCPUStats</a></div><div class="ttdeci">void getCPUStats(CPUStatsMap &amp;stats)</div><div class="ttdoc">Get CPU usage statistics from /proc/stat.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dfc/cpu_8cpp_source.html#l00157">cpu.cpp:157</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1SchedSnap_html_ad519ce292b396ea7b34eb8f98c3d76bd"><div class="ttname"><a href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#ad519ce292b396ea7b34eb8f98c3d76bd">leanux::tools::lard::SchedSnap::startSnap</a></div><div class="ttdeci">virtual void startSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00228">lar_snap.cpp:228</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_afaf001154952f8397853ca745110020e"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#afaf001154952f8397853ca745110020e">leanux::vmem::getVMStat</a></div><div class="ttdeci">void getVMStat(VMStat &amp;stat)</div><div class="ttdoc">get virtual memory statistics.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d45/vmem_8cpp_source.html#l00052">vmem.cpp:52</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1cpu_html_a83b2d7f49aba0f64199f808dbaaa702f"><div class="ttname"><a href="../../da/da3/namespaceleanux_1_1cpu.html#a83b2d7f49aba0f64199f808dbaaa702f">leanux::cpu::LoadAvg::avg10_</a></div><div class="ttdeci">double avg10_</div><div class="ttdoc">10 minute load average</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dbe/cpu_8hpp_source.html#l00176">cpu.hpp:176</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_afbb9a03d0d798094fe753a03cc0662d8"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#afbb9a03d0d798094fe753a03cc0662d8">leanux::vmem::VMStat::pswpout</a></div><div class="ttdeci">unsigned long pswpout</div><div class="ttdoc">number of pages swapped out</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00115">vmem.hpp:115</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1net_html_a29ff3c5a7e99221cc3bfe72405f72a08"><div class="ttname"><a href="../../d5/db8/namespaceleanux_1_1net.html#a29ff3c5a7e99221cc3bfe72405f72a08">leanux::net::getSysPath</a></div><div class="ttdeci">std::string getSysPath(const std::string &amp;device)</div><div class="ttdoc">Get the device sysfs path.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d84/net_8cpp_source.html#l00421">net.cpp:421</a></div></div>
<div class="ttc" id="aclassleanux_1_1util_1_1ConfigFile_html_a8cef175948cd9727c732de3a605c99ba"><div class="ttname"><a href="../../de/d84/classleanux_1_1util_1_1ConfigFile.html#a8cef175948cd9727c732de3a605c99ba">leanux::util::ConfigFile::getConfig</a></div><div class="ttdeci">static ConfigFile * getConfig()</div><div class="ttdoc">Get the ConfigurationFile object for the appname, or construct one if it does not exist.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6a/configfile_8cpp_source.html#l00268">configfile.cpp:268</a></div></div>
<div class="ttc" id="aclassleanux_1_1process_1_1StatsSorter_html"><div class="ttname"><a href="../../d8/d39/classleanux_1_1process_1_1StatsSorter.html">leanux::process::StatsSorter</a></div><div class="ttdoc">Functor class for parametrized sorting with std::sort.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/db4/process_8hpp_source.html#l00266">process.hpp:266</a></div></div>
<div class="ttc" id="anamespaceleanux_html"><div class="ttname"><a href="../../d2/dd1/namespaceleanux.html">leanux</a></div><div class="ttdoc">Linux performance and configuration API.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4d/block_8cpp_source.html#l00057">block.cpp:57</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1net_html_ac78d924eb899ccfa62581ec1d13dc75b"><div class="ttname"><a href="../../d5/db8/namespaceleanux_1_1net.html#ac78d924eb899ccfa62581ec1d13dc75b">leanux::net::getNetStat</a></div><div class="ttdeci">void getNetStat(NetStatDeviceMap &amp;stats)</div><div class="ttdoc">Get network device statistics from /proc/net/dev.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d84/net_8cpp_source.html#l00526">net.cpp:526</a></div></div>
<div class="ttc" id="aconfigfile_8hpp_html"><div class="ttname"><a href="../../db/d57/configfile_8hpp.html">configfile.hpp</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_aa43ef6b492316433053c36f0c6decca7"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#aa43ef6b492316433053c36f0c6decca7">leanux::vmem::VMStat::pgmajfault</a></div><div class="ttdeci">unsigned long pgmajfault</div><div class="ttdoc">number of major page faults</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00121">vmem.hpp:121</a></div></div>
<div class="ttc" id="aclassleanux_1_1persist_1_1Query_html_a294e11c33a22761503c49418f5ca9815"><div class="ttname"><a href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#a294e11c33a22761503c49418f5ca9815">leanux::persist::Query::step</a></div><div class="ttdeci">bool step()</div><div class="ttdoc">Step the result list, end of list returns false.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/persist_8cpp_source.html#l00440">persist.cpp:440</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1SchedSnap_html_aa6adf554028f38d4652a368f029a605d"><div class="ttname"><a href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#aa6adf554028f38d4652a368f029a605d">leanux::tools::lard::SchedSnap::stopSnap</a></div><div class="ttdeci">virtual void stopSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00233">lar_snap.cpp:233</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1process_html_a016ba417c40324fe090a55a67d3ca2a6"><div class="ttname"><a href="../../d9/d34/namespaceleanux_1_1process.html#a016ba417c40324fe090a55a67d3ca2a6">leanux::process::deltaProcPidStats</a></div><div class="ttdeci">void deltaProcPidStats(const ProcPidStatMap &amp;snap1, const ProcPidStatMap &amp;snap2, ProcPidStatDeltaVector &amp;delta)</div><div class="ttdoc">Get a delta of two ProcPidStatMap std::maps into the delta std::map.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d4c/process_8cpp_source.html#l00244">process.cpp:244</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1MountSnap_html_a03ffa5736036aaed951d16b51d181c29"><div class="ttname"><a href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a03ffa5736036aaed951d16b51d181c29">leanux::tools::lard::MountSnap::stopSnap</a></div><div class="ttdeci">virtual void stopSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00556">lar_snap.cpp:556</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1ResSnap_html_a03496036d673feae3ae05cd1106c2858"><div class="ttname"><a href="../../d4/d46/classleanux_1_1tools_1_1lard_1_1ResSnap.html#a03496036d673feae3ae05cd1106c2858">leanux::tools::lard::ResSnap::storeSnap</a></div><div class="ttdeci">virtual long storeSnap(const persist::Database &amp;db, long snapid, double seconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00518">lar_snap.cpp:518</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1SchedSnap_html_a749d191a03638897ca203e6349bb98c1"><div class="ttname"><a href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a749d191a03638897ca203e6349bb98c1">leanux::tools::lard::SchedSnap::sched2_</a></div><div class="ttdeci">cpu::SchedInfo sched2_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00124">lar_snap.hpp:124</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1net_html_ae1bc6c94c0c1352bbad7abeb430dea86"><div class="ttname"><a href="../../d5/db8/namespaceleanux_1_1net.html#ae1bc6c94c0c1352bbad7abeb430dea86">leanux::net::getTCPConnectionCounters</a></div><div class="ttdeci">void getTCPConnectionCounters(std::list&lt; TCPKeyCounter &gt; &amp;servers, std::list&lt; TCPKeyCounter &gt; &amp;clients)</div><div class="ttdoc">Return the number of established TCP connections grouped by (ip,port,uid).</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d84/net_8cpp_source.html#l00606">net.cpp:606</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1cpu_html_a5d7514f5473fc70435813857f2e4e040"><div class="ttname"><a href="../../da/da3/namespaceleanux_1_1cpu.html#a5d7514f5473fc70435813857f2e4e040">leanux::cpu::SchedInfo::blocked</a></div><div class="ttdeci">unsigned int blocked</div><div class="ttdoc">the number of blocked processes (processes in state D).</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dbe/cpu_8hpp_source.html#l00194">cpu.hpp:194</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1MountSnap_html_a9c07dcd871a1855ae37ea417760386b3"><div class="ttname"><a href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a9c07dcd871a1855ae37ea417760386b3">leanux::tools::lard::MountSnap::fsbytes2_</a></div><div class="ttdeci">std::map&lt; std::string, unsigned long &gt; fsbytes2_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00193">lar_snap.hpp:193</a></div></div>
<div class="ttc" id="aclassleanux_1_1util_1_1ConfigFile_html_af62cc2be1bf08d122bd390f18a886fdc"><div class="ttname"><a href="../../de/d84/classleanux_1_1util_1_1ConfigFile.html#af62cc2be1bf08d122bd390f18a886fdc">leanux::util::ConfigFile::getStringListValue</a></div><div class="ttdeci">std::list&lt; std::string &gt; getStringListValue(const std::string &amp;name) const</div><div class="ttdoc">return the configuration parameter as an int.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6a/configfile_8cpp_source.html#l00162">configfile.cpp:162</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1system_html_a9821718a0beca2213c2f294267255d59"><div class="ttname"><a href="../../dd/d42/namespaceleanux_1_1system.html#a9821718a0beca2213c2f294267255d59">leanux::system::getNumLoginUsers</a></div><div class="ttdeci">unsigned int getNumLoginUsers()</div><div class="ttdoc">The number of distinct users logged in.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df8/system_8cpp_source.html#l00244">system.cpp:244</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1VMSnap_html_a709d275ddbf602e20d6b0b55586c7fd5"><div class="ttname"><a href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a709d275ddbf602e20d6b0b55586c7fd5">leanux::tools::lard::VMSnap::stat1_</a></div><div class="ttdeci">vmem::VMStat stat1_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00152">lar_snap.hpp:152</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1MountSnap_html_a120530cc1c41a9f94c226a2e804de745"><div class="ttname"><a href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a120530cc1c41a9f94c226a2e804de745">leanux::tools::lard::MountSnap::stat2_</a></div><div class="ttdeci">block::DeviceStatsMap stat2_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00191">lar_snap.hpp:191</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_aad5590b405fd21605d6bd45c899cc8d4"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#aad5590b405fd21605d6bd45c899cc8d4">leanux::vmem::VMStat::pgpgin</a></div><div class="ttdeci">unsigned long pgpgin</div><div class="ttdoc">number of pages paged in</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00106">vmem.hpp:106</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1IOSnap_html_a5e4b8c858676105c2c505038f110a377"><div class="ttname"><a href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#a5e4b8c858676105c2c505038f110a377">leanux::tools::lard::IOSnap::stat2_</a></div><div class="ttdeci">block::DeviceStatsMap stat2_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00097">lar_snap.hpp:97</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_ace68d883666a1ca1c069c2c4efb10092"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#ace68d883666a1ca1c069c2c4efb10092">leanux::vmem::VMStat::nr_mapped</a></div><div class="ttdeci">unsigned long nr_mapped</div><div class="ttdoc">number of mapped pages</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00076">vmem.hpp:76</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a5f300e5e6c4518aa8dee4d151aaf4ba7"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a5f300e5e6c4518aa8dee4d151aaf4ba7">leanux::vmem::VMStat::committed_as</a></div><div class="ttdeci">unsigned long committed_as</div><div class="ttdoc">committed address space bytes</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00142">vmem.hpp:142</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1NetSnap_html_a856922288b7d4d63dd2f173ee7eb0dd3"><div class="ttname"><a href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#a856922288b7d4d63dd2f173ee7eb0dd3">leanux::tools::lard::NetSnap::startSnap</a></div><div class="ttdeci">virtual void startSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00263">lar_snap.cpp:263</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1process_html_a25f41d972bb92c8cbe982e0c74c68f7d"><div class="ttname"><a href="../../d9/d34/namespaceleanux_1_1process.html#a25f41d972bb92c8cbe982e0c74c68f7d">leanux::process::getProcUid</a></div><div class="ttdeci">bool getProcUid(pid_t pid, uid_t &amp;uid)</div><div class="ttdoc">get the effective uid of a running process.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d4c/process_8cpp_source.html#l00336">process.cpp:336</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1TCPEstaSnap_html_adc30b5d65eacc454cb653851f6180f8b"><div class="ttname"><a href="../../d7/dff/classleanux_1_1tools_1_1lard_1_1TCPEstaSnap.html#adc30b5d65eacc454cb653851f6180f8b">leanux::tools::lard::TCPEstaSnap::storeSnap</a></div><div class="ttdeci">virtual long storeSnap(const persist::Database &amp;db, long snapid, double seconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00670">lar_snap.cpp:670</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1block_html_ae227ed1fa83d91988072e335ea0f81e9"><div class="ttname"><a href="../../d5/d01/namespaceleanux_1_1block.html#ae227ed1fa83d91988072e335ea0f81e9">leanux::block::getStats</a></div><div class="ttdeci">void getStats(DeviceStatsMap &amp;statsmap)</div><div class="ttdoc">get block device statistics into a DeviceStatsMap.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4d/block_8cpp_source.html#l01240">block.cpp:1240</a></div></div>
<div class="ttc" id="aclassleanux_1_1persist_1_1DML_html"><div class="ttname"><a href="../../d9/d78/classleanux_1_1persist_1_1DML.html">leanux::persist::DML</a></div><div class="ttdoc">Data Modification Language statements can take bind values.</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d27/persist_8hpp_source.html#l00251">persist.hpp:251</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1cpu_html_ac5901cd50a8f7e4263b2ecb9875a818d"><div class="ttname"><a href="../../da/da3/namespaceleanux_1_1cpu.html#ac5901cd50a8f7e4263b2ecb9875a818d">leanux::cpu::getSchedInfo</a></div><div class="ttdeci">SchedInfo getSchedInfo()</div><div class="ttdoc">Get the number of running and blocked processes.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dfc/cpu_8cpp_source.html#l00275">cpu.cpp:275</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1ProcSnap_html_a72642854986fa7b770e892911deca967"><div class="ttname"><a href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#a72642854986fa7b770e892911deca967">leanux::tools::lard::ProcSnap::snap1_</a></div><div class="ttdeci">process::ProcPidStatMap snap1_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00165">lar_snap.hpp:165</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a9bd8bd4fac876cbf81c2affecbd0c40e"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a9bd8bd4fac876cbf81c2affecbd0c40e">leanux::vmem::VMStat::nr_slab_unreclaimable</a></div><div class="ttdeci">unsigned long nr_slab_unreclaimable</div><div class="ttdoc">number of unreclaimable pages from the slab</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00091">vmem.hpp:91</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a8cde0b9ae698c83dfef47b878a283a11"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a8cde0b9ae698c83dfef47b878a283a11">leanux::vmem::VMStat::hugepagesize</a></div><div class="ttdeci">unsigned long hugepagesize</div><div class="ttdoc">hugepagesize</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00154">vmem.hpp:154</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1IOSnap_html_aaa09ea465f8fc251716e47382551cf13"><div class="ttname"><a href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#aaa09ea465f8fc251716e47382551cf13">leanux::tools::lard::IOSnap::startSnap</a></div><div class="ttdeci">virtual void startSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00101">lar_snap.cpp:101</a></div></div>
<div class="ttc" id="aclassleanux_1_1block_1_1StatsSorter_html"><div class="ttname"><a href="../../d4/d1c/classleanux_1_1block_1_1StatsSorter.html">leanux::block::StatsSorter</a></div><div class="ttdoc">sorter for DeviceStatsMap delta.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db2/block_8hpp_source.html#l00901">block.hpp:901</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1cpu_html_a9f50740a011befb245de0dbfbbf6e4ca"><div class="ttname"><a href="../../da/da3/namespaceleanux_1_1cpu.html#a9f50740a011befb245de0dbfbbf6e4ca">leanux::cpu::getLoadAvg</a></div><div class="ttdeci">void getLoadAvg(LoadAvg &amp;avg)</div><div class="ttdoc">Get the system load averages.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dfc/cpu_8cpp_source.html#l00265">cpu.cpp:265</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1system_html_aa437aedfc8ba5b977baef289f25c5da3"><div class="ttname"><a href="../../dd/d42/namespaceleanux_1_1system.html#aa437aedfc8ba5b977baef289f25c5da3">leanux::system::getOpenInodes</a></div><div class="ttdeci">void getOpenInodes(unsigned long *used, unsigned long *free)</div><div class="ttdoc">get the used and free number of open inodes.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df8/system_8cpp_source.html#l00208">system.cpp:208</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1NetSnap_html_ae8cd4335baf9f198502d69d685b95b38"><div class="ttname"><a href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#ae8cd4335baf9f198502d69d685b95b38">leanux::tools::lard::NetSnap::stat1_</a></div><div class="ttdeci">net::NetStatDeviceMap stat1_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00139">lar_snap.hpp:139</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1block_html_aa7dafdc339a1159d4364e877a7453c03"><div class="ttname"><a href="../../d5/d01/namespaceleanux_1_1block.html#aa7dafdc339a1159d4364e877a7453c03">leanux::block::deltaDeviceStats</a></div><div class="ttdeci">void deltaDeviceStats(const DeviceStatsMap &amp;snap1, const DeviceStatsMap &amp;snap2, DeviceStatsMap &amp;delta, MajorMinorVector &amp;vec)</div><div class="ttdoc">create a delta of two DeviceStatsMaps.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4d/block_8cpp_source.html#l01271">block.cpp:1271</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1tools_1_1lard_html_a8757718fb867b3a70a6f878bbe586342"><div class="ttname"><a href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a8757718fb867b3a70a6f878bbe586342">leanux::tools::lard::LOG_INFO</a></div><div class="ttdeci">const unsigned short LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00057">lar_snap.hpp:57</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a5d8045f4af5b2b0eecc87e6994ab1f32"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a5d8045f4af5b2b0eecc87e6994ab1f32">leanux::vmem::VMStat::pgalloc_movable</a></div><div class="ttdeci">unsigned long pgalloc_movable</div><div class="ttdoc">number of allocated moveable pages</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00133">vmem.hpp:133</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1ResSnap_html_a1ab5935f077d0fba67e810019d62b307"><div class="ttname"><a href="../../d4/d46/classleanux_1_1tools_1_1lard_1_1ResSnap.html#a1ab5935f077d0fba67e810019d62b307">leanux::tools::lard::ResSnap::stopSnap</a></div><div class="ttdeci">virtual void stopSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00515">lar_snap.cpp:515</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a3aabe3c1ac2222d9a3a1262b7d03f798"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a3aabe3c1ac2222d9a3a1262b7d03f798">leanux::vmem::VMStat::pgfree</a></div><div class="ttdeci">unsigned long pgfree</div><div class="ttdoc">number of pages freed</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00136">vmem.hpp:136</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1NetSnap_html_ae435da0b37eaa1318ab2b58d2a6ec668"><div class="ttname"><a href="../../d2/de5/classleanux_1_1tools_1_1lard_1_1NetSnap.html#ae435da0b37eaa1318ab2b58d2a6ec668">leanux::tools::lard::NetSnap::stat2_</a></div><div class="ttdeci">net::NetStatDeviceMap stat2_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00140">lar_snap.hpp:140</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1tools_1_1lard_html_a0a3951f50023eb0f3b4f6722a5943436"><div class="ttname"><a href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a0a3951f50023eb0f3b4f6722a5943436">leanux::tools::lard::sysLog</a></div><div class="ttdeci">void sysLog(unsigned short level, unsigned short limit, const std::string &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00056">lar_snap.cpp:56</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1VMSnap_html_a37c5af9624501ff9094fcd956863bad0"><div class="ttname"><a href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#a37c5af9624501ff9094fcd956863bad0">leanux::tools::lard::VMSnap::startSnap</a></div><div class="ttdeci">virtual void startSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00328">lar_snap.cpp:328</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1system_html_a52dc747f7af9f66fabb1ccfd72c7c450"><div class="ttname"><a href="../../dd/d42/namespaceleanux_1_1system.html#a52dc747f7af9f66fabb1ccfd72c7c450">leanux::system::getPageSize</a></div><div class="ttdeci">long getPageSize()</div><div class="ttdoc">Get the system page size.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df8/system_8cpp_source.html#l00104">system.cpp:104</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a59a4322a73b3d393f11ff78a087c57c6"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a59a4322a73b3d393f11ff78a087c57c6">leanux::vmem::VMStat::mem_total</a></div><div class="ttdeci">unsigned long mem_total</div><div class="ttdoc">total memory bytes</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00139">vmem.hpp:139</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1system_html_acf5450712deab2fd3ebe192a290c4bc6"><div class="ttname"><a href="../../dd/d42/namespaceleanux_1_1system.html#acf5450712deab2fd3ebe192a290c4bc6">leanux::system::getNumProcesses</a></div><div class="ttdeci">void getNumProcesses(unsigned long *processes)</div><div class="ttdoc">Get the number of processes on the system.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df8/system_8cpp_source.html#l00219">system.cpp:219</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_afedf0b80df60c72d39c53056e755bbf1"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#afedf0b80df60c72d39c53056e755bbf1">leanux::vmem::VMStat::nr_shmem</a></div><div class="ttdeci">unsigned long nr_shmem</div><div class="ttdoc">number of shared memory pages</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00100">vmem.hpp:100</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1ProcSnap_html_ab54043cba9664efa3321d9456c9bb3a0"><div class="ttname"><a href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#ab54043cba9664efa3321d9456c9bb3a0">leanux::tools::lard::ProcSnap::startSnap</a></div><div class="ttdeci">virtual void startSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00408">lar_snap.cpp:408</a></div></div>
<div class="ttc" id="aclassleanux_1_1persist_1_1Statement_html_a1b809c1b1d0e9d24af65e439c3893d74"><div class="ttname"><a href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a1b809c1b1d0e9d24af65e439c3893d74">leanux::persist::Statement::prepare</a></div><div class="ttdeci">void prepare(const std::string &amp;sql)</div><div class="ttdoc">Prepare a SQL statement.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/persist_8cpp_source.html#l00363">persist.cpp:363</a></div></div>
<div class="ttc" id="alar__snap_8hpp_html"><div class="ttname"><a href="../../d1/d59/lar__snap_8hpp.html">lar_snap.hpp</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_ad7806aa24d50622cb567e500404fbb4c"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#ad7806aa24d50622cb567e500404fbb4c">leanux::vmem::VMStat::nr_free_pages</a></div><div class="ttdeci">unsigned long nr_free_pages</div><div class="ttdoc">number of pages not used for anything.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00052">vmem.hpp:52</a></div></div>
<div class="ttc" id="aclassleanux_1_1persist_1_1Database_html"><div class="ttname"><a href="../../d8/daf/classleanux_1_1persist_1_1Database.html">leanux::persist::Database</a></div><div class="ttdoc">A STL friendly wrapper around a sqlite3 database.</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d27/persist_8hpp_source.html#l00062">persist.hpp:62</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1cpu_html_a35d1bf5dbb139fcebedd891244d36039"><div class="ttname"><a href="../../da/da3/namespaceleanux_1_1cpu.html#a35d1bf5dbb139fcebedd891244d36039">leanux::cpu::getCPUCoreId</a></div><div class="ttdeci">unsigned long getCPUCoreId(unsigned long logicalcpu)</div><div class="ttdoc">get the core id of the logical CPU from /sys/devices/system/cpu/cpuX/core_id.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dfc/cpu_8cpp_source.html#l00114">cpu.cpp:114</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1tools_1_1lard_html_a03fd56effc83bc94ce1c397cea2ae453"><div class="ttname"><a href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a03fd56effc83bc94ce1c397cea2ae453">leanux::tools::lard::snapid</a></div><div class="ttdeci">long snapid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00060">lar_snap.hpp:60</a></div></div>
<div class="ttc" id="aclassleanux_1_1persist_1_1Database_html_ad2d6eb77b4fe786579b5447fd1b692bf"><div class="ttname"><a href="../../d8/daf/classleanux_1_1persist_1_1Database.html#ad2d6eb77b4fe786579b5447fd1b692bf">leanux::persist::Database::lastInsertRowid</a></div><div class="ttdeci">long lastInsertRowid() const</div><div class="ttdoc">Get the rowid of the last inserted row.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/persist_8cpp_source.html#l00298">persist.cpp:298</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1cpu_html_aa91ada887b0ea2f7f984797b21cae3e8"><div class="ttname"><a href="../../da/da3/namespaceleanux_1_1cpu.html#aa91ada887b0ea2f7f984797b21cae3e8">leanux::cpu::SchedInfo::processes</a></div><div class="ttdeci">unsigned long processes</div><div class="ttdoc">the total number of processes created since boot.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dbe/cpu_8hpp_source.html#l00196">cpu.hpp:196</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a68bcf19c6243e99a12c9a4096cb84b60"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a68bcf19c6243e99a12c9a4096cb84b60">leanux::vmem::VMStat::nr_mlock</a></div><div class="ttdeci">unsigned long nr_mlock</div><div class="ttdoc">number of mlocked pages</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00070">vmem.hpp:70</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a82c3f6640ff3f5778228225672c59fff"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a82c3f6640ff3f5778228225672c59fff">leanux::vmem::VMStat::pswpin</a></div><div class="ttdeci">unsigned long pswpin</div><div class="ttdoc">number of pages swapped in</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00112">vmem.hpp:112</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1block_html_a4e93a020cb6003bed11dd67f7e02434f"><div class="ttname"><a href="../../d5/d01/namespaceleanux_1_1block.html#a4e93a020cb6003bed11dd67f7e02434f">leanux::block::MajorMinorVector</a></div><div class="ttdeci">std::vector&lt; MajorMinor &gt; MajorMinorVector</div><div class="ttdoc">vector of MajorMinor</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db2/block_8hpp_source.html#l00881">block.hpp:881</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1cpu_html_a3a0004a6d64bc32cd54bb0bca9621d04"><div class="ttname"><a href="../../da/da3/namespaceleanux_1_1cpu.html#a3a0004a6d64bc32cd54bb0bca9621d04">leanux::cpu::LoadAvg::avg5_</a></div><div class="ttdeci">double avg5_</div><div class="ttdoc">5 minute load average</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dbe/cpu_8hpp_source.html#l00174">cpu.hpp:174</a></div></div>
<div class="ttc" id="asystem_8hpp_html"><div class="ttname"><a href="../../dd/d90/system_8hpp.html">system.hpp</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1SchedSnap_html_a75af41bba63ce8431a38fa73929c46da"><div class="ttname"><a href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#a75af41bba63ce8431a38fa73929c46da">leanux::tools::lard::SchedSnap::load2_</a></div><div class="ttdeci">cpu::LoadAvg load2_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00126">lar_snap.hpp:126</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_aa5f055f2358a261fae3d94ea75abb73c"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#aa5f055f2358a261fae3d94ea75abb73c">leanux::vmem::VMStat::pgalloc_normal</a></div><div class="ttdeci">unsigned long pgalloc_normal</div><div class="ttdoc">number of allocated normal pages</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00130">vmem.hpp:130</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1TimeSnap_html_acfd64657c3050b650e24c102406c5810"><div class="ttname"><a href="../../d3/d88/classleanux_1_1tools_1_1lard_1_1TimeSnap.html#acfd64657c3050b650e24c102406c5810">leanux::tools::lard::TimeSnap::istop_</a></div><div class="ttdeci">time_t istop_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00083">lar_snap.hpp:83</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1net_html_a6fd1c299c0eb06a5dece79bb60649d10"><div class="ttname"><a href="../../d5/db8/namespaceleanux_1_1net.html#a6fd1c299c0eb06a5dece79bb60649d10">leanux::net::getDeviceMACAddress</a></div><div class="ttdeci">std::string getDeviceMACAddress(const std::string &amp;device)</div><div class="ttdoc">Get the device's MAC address.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d84/net_8cpp_source.html#l00116">net.cpp:116</a></div></div>
<div class="ttc" id="aclassleanux_1_1persist_1_1Query_html_ada37977ad924b728401fa1fb7506cd2e"><div class="ttname"><a href="../../d4/d2c/classleanux_1_1persist_1_1Query.html#ada37977ad924b728401fa1fb7506cd2e">leanux::persist::Query::getLong</a></div><div class="ttdeci">long getLong(int col) const</div><div class="ttdoc">Get long value from select list.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/persist_8cpp_source.html#l00456">persist.cpp:456</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1SchedSnap_html_ae2ac34d0684cf4ae4d8a99cda449c7b7"><div class="ttname"><a href="../../d3/d40/classleanux_1_1tools_1_1lard_1_1SchedSnap.html#ae2ac34d0684cf4ae4d8a99cda449c7b7">leanux::tools::lard::SchedSnap::sched1_</a></div><div class="ttdeci">cpu::SchedInfo sched1_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00123">lar_snap.hpp:123</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a88034aaec4e3676e338c6739796c9cea"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a88034aaec4e3676e338c6739796c9cea">leanux::vmem::VMStat::nr_slab_reclaimable</a></div><div class="ttdeci">unsigned long nr_slab_reclaimable</div><div class="ttdoc">number of reclaimable pages from the slab</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00088">vmem.hpp:88</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_ad185f2b01a600e08344530767f675c1e"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#ad185f2b01a600e08344530767f675c1e">leanux::vmem::VMStat::pgalloc_dma32</a></div><div class="ttdeci">unsigned long pgalloc_dma32</div><div class="ttdoc">number of dma 32 pages</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00127">vmem.hpp:127</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_ad5eb0802990129da600def836e33385f"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#ad5eb0802990129da600def836e33385f">leanux::vmem::VMStat::nr_page_table_pages</a></div><div class="ttdeci">unsigned long nr_page_table_pages</div><div class="ttdoc">number of paging table pages</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00094">vmem.hpp:94</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1VMSnap_html_aee736b0ce373317ae174dfe61d79b01e"><div class="ttname"><a href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#aee736b0ce373317ae174dfe61d79b01e">leanux::tools::lard::VMSnap::stat2_</a></div><div class="ttdeci">vmem::VMStat stat2_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00153">lar_snap.hpp:153</a></div></div>
<div class="ttc" id="aclassleanux_1_1util_1_1ConfigFile_html_aae0c3891e3d5a8d391a7439602b92780"><div class="ttname"><a href="../../de/d84/classleanux_1_1util_1_1ConfigFile.html#aae0c3891e3d5a8d391a7439602b92780">leanux::util::ConfigFile::getIntValue</a></div><div class="ttdeci">int getIntValue(const std::string &amp;name) const</div><div class="ttdoc">return the configuration parameter as an int.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6a/configfile_8cpp_source.html#l00221">configfile.cpp:221</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1system_html_a3cdfe742d15c8f3d4d7c01be3f3b42c7"><div class="ttname"><a href="../../dd/d42/namespaceleanux_1_1system.html#a3cdfe742d15c8f3d4d7c01be3f3b42c7">leanux::system::getNumLogins</a></div><div class="ttdeci">unsigned int getNumLogins()</div><div class="ttdoc">The number of user logins as reported by who.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df8/system_8cpp_source.html#l00231">system.cpp:231</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1block_html_afaee6721d578e4e9ccbebb7dea5919a6"><div class="ttname"><a href="../../d5/d01/namespaceleanux_1_1block.html#afaee6721d578e4e9ccbebb7dea5919a6">leanux::block::enumMounts</a></div><div class="ttdeci">void enumMounts(std::map&lt; MajorMinor, MountInfo &gt; &amp;mounts)</div><div class="ttdoc">Get a map of MajorMinor to MountInfo from /proc/mounts.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4d/block_8cpp_source.html#l01032">block.cpp:1032</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1tools_1_1lard_html_a0caca769051aa8ad8590ca7e048ac947"><div class="ttname"><a href="../../d4/d62/namespaceleanux_1_1tools_1_1lard.html#a0caca769051aa8ad8590ca7e048ac947">leanux::tools::lard::LOG_DEBUG</a></div><div class="ttdeci">const unsigned short LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00058">lar_snap.hpp:58</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1IOSnap_html_ab020781eb6e152bf9b884a4000d7e923"><div class="ttname"><a href="../../d8/d77/classleanux_1_1tools_1_1lard_1_1IOSnap.html#ab020781eb6e152bf9b884a4000d7e923">leanux::tools::lard::IOSnap::stopSnap</a></div><div class="ttdeci">virtual void stopSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00105">lar_snap.cpp:105</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a33a513a4e5b54a299faa34504466306a"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a33a513a4e5b54a299faa34504466306a">leanux::vmem::VMStat::nr_anon_transparent_hugepages</a></div><div class="ttdeci">unsigned long nr_anon_transparent_hugepages</div><div class="ttdoc">number of anonymous transparent pages</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00103">vmem.hpp:103</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1MountSnap_html_a6dc9b399cf8e065067a11a6e0d8c17f9"><div class="ttname"><a href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a6dc9b399cf8e065067a11a6e0d8c17f9">leanux::tools::lard::MountSnap::fsbytes1_</a></div><div class="ttdeci">std::map&lt; std::string, unsigned long &gt; fsbytes1_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00192">lar_snap.hpp:192</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1system_html_a0fcf2d5d45e7838be8424cf1eabeeb14"><div class="ttname"><a href="../../dd/d42/namespaceleanux_1_1system.html#a0fcf2d5d45e7838be8424cf1eabeeb14">leanux::system::getOpenFiles</a></div><div class="ttdeci">void getOpenFiles(unsigned long *used, unsigned long *max)</div><div class="ttdoc">get the current and maximum number of open files.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/df8/system_8cpp_source.html#l00196">system.cpp:196</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1ProcSnap_html_a2922f8c93498c97d1b47ec2e6b7d817d"><div class="ttname"><a href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#a2922f8c93498c97d1b47ec2e6b7d817d">leanux::tools::lard::ProcSnap::stopSnap</a></div><div class="ttdeci">virtual void stopSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00412">lar_snap.cpp:412</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1MountSnap_html_a934aedfb855a789ff7039b23112c4ae1"><div class="ttname"><a href="../../d0/db5/classleanux_1_1tools_1_1lard_1_1MountSnap.html#a934aedfb855a789ff7039b23112c4ae1">leanux::tools::lard::MountSnap::startSnap</a></div><div class="ttdeci">virtual void startSnap()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00552">lar_snap.cpp:552</a></div></div>
<div class="ttc" id="aclassleanux_1_1persist_1_1Statement_html_a4696481e678f7c7337c07c480ee985ec"><div class="ttname"><a href="../../db/dff/classleanux_1_1persist_1_1Statement.html#a4696481e678f7c7337c07c480ee985ec">leanux::persist::Statement::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Reset a SQL statement for rexecute or even re-prepare.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d97/persist_8cpp_source.html#l00374">persist.cpp:374</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1block_html_aa840e578e98199d5f3f2cdd80e356778"><div class="ttname"><a href="../../d5/d01/namespaceleanux_1_1block.html#aa840e578e98199d5f3f2cdd80e356778">leanux::block::DeviceStatsMap</a></div><div class="ttdeci">std::map&lt; MajorMinor, DeviceStats &gt; DeviceStatsMap</div><div class="ttdoc">map of MajorMinor to DeviceStats.</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db2/block_8hpp_source.html#l00878">block.hpp:878</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1VMSnap_html_ad7ebbd5cb631d19b7c1a08aeeb7e138b"><div class="ttname"><a href="../../d5/d46/classleanux_1_1tools_1_1lard_1_1VMSnap.html#ad7ebbd5cb631d19b7c1a08aeeb7e138b">leanux::tools::lard::VMSnap::storeSnap</a></div><div class="ttdeci">virtual long storeSnap(const persist::Database &amp;db, long snapid, double seconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00336">lar_snap.cpp:336</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a0879751188598f00195732d8b1495b68"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a0879751188598f00195732d8b1495b68">leanux::vmem::VMStat::pgfault</a></div><div class="ttdeci">unsigned long pgfault</div><div class="ttdoc">number of minor page faults</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00118">vmem.hpp:118</a></div></div>
<div class="ttc" id="aclassleanux_1_1process_1_1StatsSorter_html_a861b54c618426ee71645e7388630a112ad8fa87a6e5a3924b7b74b5ce173882c5"><div class="ttname"><a href="../../d8/d39/classleanux_1_1process_1_1StatsSorter.html#a861b54c618426ee71645e7388630a112ad8fa87a6e5a3924b7b74b5ce173882c5">leanux::process::StatsSorter::top</a></div><div class="ttdeci">@ top</div><div class="ttdoc">sort on utime+stime+delayacct_blkio_ticks, majflt, minflt.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/db4/process_8hpp_source.html#l00293">process.hpp:293</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1cpu_html_abfc5428918d25d231dca77161bf07bdb"><div class="ttname"><a href="../../da/da3/namespaceleanux_1_1cpu.html#abfc5428918d25d231dca77161bf07bdb">leanux::cpu::LoadAvg::avg15_</a></div><div class="ttdeci">double avg15_</div><div class="ttdoc">15 minute load average</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dbe/cpu_8hpp_source.html#l00178">cpu.hpp:178</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1process_html_a342f1615ea084dae220d00aec56204ee"><div class="ttname"><a href="../../d9/d34/namespaceleanux_1_1process.html#a342f1615ea084dae220d00aec56204ee">leanux::process::ProcPidStatDeltaVector</a></div><div class="ttdeci">std::vector&lt; ProcPidStatDelta &gt; ProcPidStatDeltaVector</div><div class="ttdoc">A std::vector of ProcPidStatDelta elements.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/db4/process_8hpp_source.html#l00247">process.hpp:247</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a3b79ad04509bbf977e1f080dea483b80"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a3b79ad04509bbf977e1f080dea483b80">leanux::vmem::VMStat::pgpgout</a></div><div class="ttdeci">unsigned long pgpgout</div><div class="ttdoc">number of pages paged out</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00109">vmem.hpp:109</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1ProcSnap_html_ab816bcbf8f8986599df48ee7131c10fb"><div class="ttname"><a href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#ab816bcbf8f8986599df48ee7131c10fb">leanux::tools::lard::ProcSnap::storeSnap</a></div><div class="ttdeci">virtual long storeSnap(const persist::Database &amp;db, long snapid, double seconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc8/lar__snap_8cpp_source.html#l00416">lar_snap.cpp:416</a></div></div>
<div class="ttc" id="aclassleanux_1_1tools_1_1lard_1_1ProcSnap_html_a05c2d59808e0cfd540298e67fa687f12"><div class="ttname"><a href="../../d4/d0e/classleanux_1_1tools_1_1lard_1_1ProcSnap.html#a05c2d59808e0cfd540298e67fa687f12">leanux::tools::lard::ProcSnap::snap2_</a></div><div class="ttdeci">process::ProcPidStatMap snap2_</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d59/lar__snap_8hpp_source.html#l00166">lar_snap.hpp:166</a></div></div>
<div class="ttc" id="anamespaceleanux_1_1vmem_html_a2ec7264215b36335734fad97427e5e5d"><div class="ttname"><a href="../../dc/d32/namespaceleanux_1_1vmem.html#a2ec7264215b36335734fad97427e5e5d">leanux::vmem::VMStat::nr_file_pages</a></div><div class="ttdeci">unsigned long nr_file_pages</div><div class="ttdoc">number of file pages</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da3/vmem_8hpp_source.html#l00079">vmem.hpp:79</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_4eeb864c4eec08c7d6b9d3b0352cfdde.html">tools</a></li><li class="navelem"><a class="el" href="../../dir_52808ae987711afc12bd407eda038bc0.html">lard</a></li><li class="navelem"><a class="el" href="../../d4/dc8/lar__snap_8cpp.html">lar_snap.cpp</a></li>
    <li class="footer">Generated on Sun Mar 13 2022 10:48:56 for leanux by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
